<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/><meta name="theme-color" content="#FFFFFF"/><meta name="generator" content="Gatsby 4.11.3"/><style data-href="/styles.3aaba633489943369223.css" data-identity="gatsby-global-css">@media (prefers-color-scheme:dark){.markdown-body{--color-prettylights-syntax-comment:#8b949e;--color-prettylights-syntax-constant:#79c0ff;--color-prettylights-syntax-entity:#d2a8ff;--color-prettylights-syntax-storage-modifier-import:#c9d1d9;--color-prettylights-syntax-entity-tag:#7ee787;--color-prettylights-syntax-keyword:#ff7b72;--color-prettylights-syntax-string:#a5d6ff;--color-prettylights-syntax-variable:#ffa657;--color-prettylights-syntax-brackethighlighter-unmatched:#f85149;--color-prettylights-syntax-invalid-illegal-text:#f0f6fc;--color-prettylights-syntax-invalid-illegal-bg:#8e1519;--color-prettylights-syntax-carriage-return-text:#f0f6fc;--color-prettylights-syntax-carriage-return-bg:#b62324;--color-prettylights-syntax-string-regexp:#7ee787;--color-prettylights-syntax-markup-list:#f2cc60;--color-prettylights-syntax-markup-heading:#1f6feb;--color-prettylights-syntax-markup-italic:#c9d1d9;--color-prettylights-syntax-markup-bold:#c9d1d9;--color-prettylights-syntax-markup-deleted-text:#ffdcd7;--color-prettylights-syntax-markup-deleted-bg:#67060c;--color-prettylights-syntax-markup-inserted-text:#aff5b4;--color-prettylights-syntax-markup-inserted-bg:#033a16;--color-prettylights-syntax-markup-changed-text:#ffdfb6;--color-prettylights-syntax-markup-changed-bg:#5a1e02;--color-prettylights-syntax-markup-ignored-text:#c9d1d9;--color-prettylights-syntax-markup-ignored-bg:#1158c7;--color-prettylights-syntax-meta-diff-range:#d2a8ff;--color-prettylights-syntax-brackethighlighter-angle:#8b949e;--color-prettylights-syntax-sublimelinter-gutter-mark:#484f58;--color-prettylights-syntax-constant-other-reference-link:#a5d6ff;--color-fg-default:#c9d1d9;--color-fg-muted:#8b949e;--color-fg-subtle:#484f58;--color-canvas-default:#0d1117;--color-canvas-subtle:#161b22;--color-border-default:#30363d;--color-border-muted:#21262d;--color-neutral-muted:hsla(215,8%,47%,.4);--color-accent-fg:#58a6ff;--color-accent-emphasis:#1f6feb;--color-attention-subtle:rgba(187,128,9,.15);--color-danger-fg:#f85149;color-scheme:dark}}@media (prefers-color-scheme:light){.markdown-body{--color-prettylights-syntax-comment:#6e7781;--color-prettylights-syntax-constant:#0550ae;--color-prettylights-syntax-entity:#8250df;--color-prettylights-syntax-storage-modifier-import:#24292f;--color-prettylights-syntax-entity-tag:#116329;--color-prettylights-syntax-keyword:#cf222e;--color-prettylights-syntax-string:#0a3069;--color-prettylights-syntax-variable:#953800;--color-prettylights-syntax-brackethighlighter-unmatched:#82071e;--color-prettylights-syntax-invalid-illegal-text:#f6f8fa;--color-prettylights-syntax-invalid-illegal-bg:#82071e;--color-prettylights-syntax-carriage-return-text:#f6f8fa;--color-prettylights-syntax-carriage-return-bg:#cf222e;--color-prettylights-syntax-string-regexp:#116329;--color-prettylights-syntax-markup-list:#3b2300;--color-prettylights-syntax-markup-heading:#0550ae;--color-prettylights-syntax-markup-italic:#24292f;--color-prettylights-syntax-markup-bold:#24292f;--color-prettylights-syntax-markup-deleted-text:#82071e;--color-prettylights-syntax-markup-deleted-bg:#ffebe9;--color-prettylights-syntax-markup-inserted-text:#116329;--color-prettylights-syntax-markup-inserted-bg:#dafbe1;--color-prettylights-syntax-markup-changed-text:#953800;--color-prettylights-syntax-markup-changed-bg:#ffd8b5;--color-prettylights-syntax-markup-ignored-text:#eaeef2;--color-prettylights-syntax-markup-ignored-bg:#0550ae;--color-prettylights-syntax-meta-diff-range:#8250df;--color-prettylights-syntax-brackethighlighter-angle:#57606a;--color-prettylights-syntax-sublimelinter-gutter-mark:#8c959f;--color-prettylights-syntax-constant-other-reference-link:#0a3069;--color-fg-default:#24292f;--color-fg-muted:#57606a;--color-fg-subtle:#6e7781;--color-canvas-default:#fff;--color-canvas-subtle:#f6f8fa;--color-border-default:#d0d7de;--color-border-muted:#d8dee4;--color-neutral-muted:rgba(175,184,193,.2);--color-accent-fg:#0969da;--color-accent-emphasis:#0969da;--color-attention-subtle:#fff8c5;--color-danger-fg:#cf222e;color-scheme:light}}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;word-wrap:break-word;background-color:var(--color-canvas-default);color:var(--color-fg-default);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;margin:0}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{background-color:currentColor;content:" ";display:inline-block;height:16px;-webkit-mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0z"/></svg>');mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0z"/></svg>');width:16px}.markdown-body details,.markdown-body figcaption,.markdown-body figure{display:block}.markdown-body summary{display:list-item}.markdown-body [hidden]{display:none!important}.markdown-body a{background-color:transparent;color:var(--color-accent-fg);text-decoration:none}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body abbr[title]{border-bottom:none;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.markdown-body b,.markdown-body strong{font-weight:600}.markdown-body dfn{font-style:italic}.markdown-body h1{border-bottom:1px solid var(--color-border-muted);font-size:2em;font-weight:600;margin:.67em 0;padding-bottom:.3em}.markdown-body mark{background-color:var(--color-attention-subtle);color:var(--color-text-primary)}.markdown-body small{font-size:90%}.markdown-body sub,.markdown-body sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.markdown-body sub{bottom:-.25em}.markdown-body sup{top:-.5em}.markdown-body img{background-color:var(--color-canvas-default);border-style:none;box-sizing:content-box;max-width:100%}.markdown-body code,.markdown-body kbd,.markdown-body pre,.markdown-body samp{font-family:monospace,monospace;font-size:1em}.markdown-body figure{margin:1em 40px}.markdown-body hr{background:transparent;background-color:var(--color-border-default);border:0;box-sizing:content-box;height:.25em;margin:24px 0;overflow:hidden;padding:0}.markdown-body input{font:inherit;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible}.markdown-body [type=button],.markdown-body [type=reset],.markdown-body [type=submit]{-webkit-appearance:button}.markdown-body [type=button]::-moz-focus-inner,.markdown-body [type=reset]::-moz-focus-inner,.markdown-body [type=submit]::-moz-focus-inner{border-style:none;padding:0}.markdown-body [type=button]:-moz-focusring,.markdown-body [type=reset]:-moz-focusring,.markdown-body [type=submit]:-moz-focusring{outline:1px dotted ButtonText}.markdown-body [type=checkbox],.markdown-body [type=radio]{box-sizing:border-box;padding:0}.markdown-body [type=number]::-webkit-inner-spin-button,.markdown-body [type=number]::-webkit-outer-spin-button{height:auto}.markdown-body [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.markdown-body [type=search]::-webkit-search-cancel-button,.markdown-body [type=search]::-webkit-search-decoration{-webkit-appearance:none}.markdown-body ::-webkit-input-placeholder{color:inherit;opacity:.54}.markdown-body ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.markdown-body a:hover{text-decoration:underline}.markdown-body hr:after,.markdown-body hr:before{content:"";display:table}.markdown-body hr:after{clear:both}.markdown-body table{border-collapse:collapse;border-spacing:0;display:block;max-width:100%;overflow:auto;width:-webkit-max-content;width:max-content}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none!important}.markdown-body kbd{background-color:var(--color-canvas-subtle);border-bottom-color:var(--color-neutral-muted);border:1px solid var(--color-neutral-muted);border-radius:6px;box-shadow:inset 0 -1px 0 var(--color-neutral-muted);color:var(--color-fg-default);display:inline-block;font:11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;line-height:10px;padding:3px 5px;vertical-align:middle}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:24px}.markdown-body h2{border-bottom:1px solid var(--color-border-muted);font-size:1.5em;font-weight:600;padding-bottom:.3em}.markdown-body h3{font-size:1.25em;font-weight:600}.markdown-body h4{font-size:1em;font-weight:600}.markdown-body h5{font-size:.875em;font-weight:600}.markdown-body h6{color:var(--color-fg-muted);font-size:.85em;font-weight:600}.markdown-body p{margin-bottom:10px;margin-top:0}.markdown-body blockquote{border-left:.25em solid var(--color-border-default);color:var(--color-fg-muted);margin:0;padding:0 1em}.markdown-body ol,.markdown-body ul{margin-bottom:0;margin-top:0;padding-left:2em}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre,.markdown-body tt{font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px}.markdown-body pre{word-wrap:normal;margin-bottom:0;margin-top:0}.markdown-body .octicon{fill:currentColor;display:inline-block;overflow:visible!important;vertical-align:text-bottom}.markdown-body ::-webkit-input-placeholder{color:var(--color-fg-subtle);opacity:1}.markdown-body :-ms-input-placeholder{color:var(--color-fg-subtle);opacity:1}.markdown-body ::placeholder{color:var(--color-fg-subtle);opacity:1}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}.markdown-body .pl-c{color:var(--color-prettylights-syntax-comment)}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:var(--color-prettylights-syntax-constant)}.markdown-body .pl-e,.markdown-body .pl-en{color:var(--color-prettylights-syntax-entity)}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:var(--color-prettylights-syntax-storage-modifier-import)}.markdown-body .pl-ent{color:var(--color-prettylights-syntax-entity-tag)}.markdown-body .pl-k{color:var(--color-prettylights-syntax-keyword)}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:var(--color-prettylights-syntax-string)}.markdown-body .pl-smw,.markdown-body .pl-v{color:var(--color-prettylights-syntax-variable)}.markdown-body .pl-bu{color:var(--color-prettylights-syntax-brackethighlighter-unmatched)}.markdown-body .pl-ii{background-color:var(--color-prettylights-syntax-invalid-illegal-bg);color:var(--color-prettylights-syntax-invalid-illegal-text)}.markdown-body .pl-c2{background-color:var(--color-prettylights-syntax-carriage-return-bg);color:var(--color-prettylights-syntax-carriage-return-text)}.markdown-body .pl-sr .pl-cce{color:var(--color-prettylights-syntax-string-regexp);font-weight:700}.markdown-body .pl-ml{color:var(--color-prettylights-syntax-markup-list)}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{color:var(--color-prettylights-syntax-markup-heading);font-weight:700}.markdown-body .pl-mi{color:var(--color-prettylights-syntax-markup-italic);font-style:italic}.markdown-body .pl-mb{color:var(--color-prettylights-syntax-markup-bold);font-weight:700}.markdown-body .pl-md{background-color:var(--color-prettylights-syntax-markup-deleted-bg);color:var(--color-prettylights-syntax-markup-deleted-text)}.markdown-body .pl-mi1{background-color:var(--color-prettylights-syntax-markup-inserted-bg);color:var(--color-prettylights-syntax-markup-inserted-text)}.markdown-body .pl-mc{background-color:var(--color-prettylights-syntax-markup-changed-bg);color:var(--color-prettylights-syntax-markup-changed-text)}.markdown-body .pl-mi2{background-color:var(--color-prettylights-syntax-markup-ignored-bg);color:var(--color-prettylights-syntax-markup-ignored-text)}.markdown-body .pl-mdr{color:var(--color-prettylights-syntax-meta-diff-range);font-weight:700}.markdown-body .pl-ba{color:var(--color-prettylights-syntax-brackethighlighter-angle)}.markdown-body .pl-sg{color:var(--color-prettylights-syntax-sublimelinter-gutter-mark)}.markdown-body .pl-corl{color:var(--color-prettylights-syntax-constant-other-reference-link);text-decoration:underline}.markdown-body [data-catalyst]{display:block}.markdown-body g-emoji{font-family:Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:1em;font-style:normal!important;font-weight:400;line-height:1;vertical-align:-.075em}.markdown-body g-emoji img{height:1em;width:1em}.markdown-body:after,.markdown-body:before{content:"";display:table}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:var(--color-danger-fg)}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-bottom:16px;margin-top:0}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body sup>a:before{content:"["}.markdown-body sup>a:after{content:"]"}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:var(--color-fg-default);vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit;padding:0 .2em}.markdown-body ol.no-list,.markdown-body ul.no-list{list-style-type:none;padding:0}.markdown-body ol[type="1"]{list-style-type:decimal}.markdown-body ol[type=a]{list-style-type:lower-alpha}.markdown-body ol[type=i]{list-style-type:lower-roman}.markdown-body div>ol:not([type]){list-style-type:decimal}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-bottom:0;margin-top:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{font-size:1em;font-style:italic;font-weight:600;margin-top:16px;padding:0}.markdown-body dl dd{margin-bottom:16px;padding:0 16px}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{border:1px solid var(--color-border-default);padding:6px 13px}.markdown-body table tr{background-color:var(--color-canvas-default);border-top:1px solid var(--color-border-muted)}.markdown-body table tr:nth-child(2n){background-color:var(--color-canvas-subtle)}.markdown-body table img{background-color:transparent}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{background-color:transparent;max-width:none;vertical-align:text-top}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{border:1px solid var(--color-border-default);display:block;float:left;margin:13px 0 0;overflow:hidden;padding:7px;width:auto}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{clear:both;color:var(--color-fg-default);display:block;padding:5px 0 0}.markdown-body span.align-center{clear:both;display:block;overflow:hidden}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{clear:both;display:block;overflow:hidden}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{background-color:var(--color-neutral-muted);border-radius:6px;font-size:85%;margin:0;padding:.2em .4em}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre code{font-size:100%}.markdown-body pre>code{background:transparent;border:0;margin:0;padding:0;white-space:pre;word-break:normal}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{background-color:var(--color-canvas-subtle);border-radius:6px;font-size:85%;line-height:1.45;overflow:auto;padding:16px}.markdown-body pre code,.markdown-body pre tt{word-wrap:normal;background-color:transparent;border:0;display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0}.markdown-body .csv-data td,.markdown-body .csv-data th{font-size:12px;line-height:1;overflow:hidden;padding:5px;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-num{background:var(--color-canvas-default);border:0;padding:10px 8px 9px;text-align:right}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{background:var(--color-canvas-subtle);border-top:0;font-weight:600}.markdown-body .footnotes{border-top:1px solid var(--color-border-default);color:var(--color-fg-muted);font-size:12px}.markdown-body .footnotes ol{padding-left:16px}.markdown-body .footnotes li{position:relative}.markdown-body .footnotes li:target:before{border:2px solid var(--color-accent-emphasis);border-radius:6px;bottom:-8px;content:"";left:-24px;pointer-events:none;position:absolute;right:-8px;top:-8px}.markdown-body .footnotes li:target{color:var(--color-fg-default)}.markdown-body .footnotes .data-footnote-backref g-emoji{font-family:monospace}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item label{font-weight:400}.markdown-body .task-list-item.enabled label{cursor:pointer}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item .handle{display:none}.markdown-body .task-list-item-checkbox{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body .contains-task-list:dir(rtl) .task-list-item-checkbox{margin:0 -1.6em .25em .2em}.markdown-body ::-webkit-calendar-picker-indicator{-webkit-filter:invert(50%);filter:invert(50%)}@font-face{font-family:lab;src:url(/static/lab-b3a92fdc7ccdc8ebf471556b2e7b1018.woff2) format("woff2")}:root{--font-base:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;--layout-header-height:56px;--layout-footer-height:100px;--gg-border:hsla(0,0%,71%,.1)}*{box-sizing:border-box;transition:all .3s ease-out}html.dark{--theme-content-background-color:#232629;--theme-header-background-color:#232629;--theme-footer-background-color:#232629;--theme-text:#d8d8d8;--gg-logo:#d8d8d8;--gg-icon:#75757a}html.light{--theme-content-background-color:#fff;--theme-header-background-color:#fafafa;--theme-footer-background-color:#fefefe;--theme-text:#232629;--gg-logo:#232629;--gg-icon:#a5a5ac}body{font-family:var(--font-base);margin:0;padding:0}.icon-action{cursor:pointer;user-select:none}.page-title{align-items:center;display:flex;font-size:20px;font-weight:700;justify-content:center;margin-bottom:20px;text-align:center}.page-title .icon{margin-right:10px}.text-center{text-align:center}.gg-empty{color:hsla(0,0%,71%,.5);font-size:18px}.dark .markdown-body{--color-prettylights-syntax-comment:#8b949e;--color-prettylights-syntax-constant:#79c0ff;--color-prettylights-syntax-entity:#d2a8ff;--color-prettylights-syntax-storage-modifier-import:#c9d1d9;--color-prettylights-syntax-entity-tag:#7ee787;--color-prettylights-syntax-keyword:#ff7b72;--color-prettylights-syntax-string:#a5d6ff;--color-prettylights-syntax-variable:#ffa657;--color-prettylights-syntax-brackethighlighter-unmatched:#f85149;--color-prettylights-syntax-invalid-illegal-text:#f0f6fc;--color-prettylights-syntax-invalid-illegal-bg:#8e1519;--color-prettylights-syntax-carriage-return-text:#f0f6fc;--color-prettylights-syntax-carriage-return-bg:#b62324;--color-prettylights-syntax-string-regexp:#7ee787;--color-prettylights-syntax-markup-list:#f2cc60;--color-prettylights-syntax-markup-heading:#1f6feb;--color-prettylights-syntax-markup-italic:#c9d1d9;--color-prettylights-syntax-markup-bold:#c9d1d9;--color-prettylights-syntax-markup-deleted-text:#ffdcd7;--color-prettylights-syntax-markup-deleted-bg:#67060c;--color-prettylights-syntax-markup-inserted-text:#aff5b4;--color-prettylights-syntax-markup-inserted-bg:#033a16;--color-prettylights-syntax-markup-changed-text:#ffdfb6;--color-prettylights-syntax-markup-changed-bg:#5a1e02;--color-prettylights-syntax-markup-ignored-text:#c9d1d9;--color-prettylights-syntax-markup-ignored-bg:#1158c7;--color-prettylights-syntax-meta-diff-range:#d2a8ff;--color-prettylights-syntax-brackethighlighter-angle:#8b949e;--color-prettylights-syntax-sublimelinter-gutter-mark:#484f58;--color-prettylights-syntax-constant-other-reference-link:#a5d6ff;--color-fg-default:#c9d1d9;--color-fg-muted:#8b949e;--color-fg-subtle:#484f58;--color-canvas-default:#232629;--color-canvas-subtle:#161b22;--color-border-default:#30363d;--color-border-muted:#21262d;--color-neutral-muted:hsla(215,8%,47%,.4);--color-accent-fg:#58a6ff;--color-accent-emphasis:#1f6feb;--color-attention-subtle:rgba(187,128,9,.15);--color-danger-fg:#f85149;color-scheme:dark}.light .markdown-body{--color-prettylights-syntax-comment:#6e7781;--color-prettylights-syntax-constant:#0550ae;--color-prettylights-syntax-entity:#8250df;--color-prettylights-syntax-storage-modifier-import:#24292f;--color-prettylights-syntax-entity-tag:#116329;--color-prettylights-syntax-keyword:#cf222e;--color-prettylights-syntax-string:#0a3069;--color-prettylights-syntax-variable:#953800;--color-prettylights-syntax-brackethighlighter-unmatched:#82071e;--color-prettylights-syntax-invalid-illegal-text:#f6f8fa;--color-prettylights-syntax-invalid-illegal-bg:#82071e;--color-prettylights-syntax-carriage-return-text:#f6f8fa;--color-prettylights-syntax-carriage-return-bg:#cf222e;--color-prettylights-syntax-string-regexp:#116329;--color-prettylights-syntax-markup-list:#3b2300;--color-prettylights-syntax-markup-heading:#0550ae;--color-prettylights-syntax-markup-italic:#24292f;--color-prettylights-syntax-markup-bold:#24292f;--color-prettylights-syntax-markup-deleted-text:#82071e;--color-prettylights-syntax-markup-deleted-bg:#ffebe9;--color-prettylights-syntax-markup-inserted-text:#116329;--color-prettylights-syntax-markup-inserted-bg:#dafbe1;--color-prettylights-syntax-markup-changed-text:#953800;--color-prettylights-syntax-markup-changed-bg:#ffd8b5;--color-prettylights-syntax-markup-ignored-text:#eaeef2;--color-prettylights-syntax-markup-ignored-bg:#0550ae;--color-prettylights-syntax-meta-diff-range:#8250df;--color-prettylights-syntax-brackethighlighter-angle:#57606a;--color-prettylights-syntax-sublimelinter-gutter-mark:#8c959f;--color-prettylights-syntax-constant-other-reference-link:#0a3069;--color-fg-default:#24292f;--color-fg-muted:#57606a;--color-fg-subtle:#6e7781;--color-canvas-default:#fff;--color-canvas-subtle:#f6f8fa;--color-border-default:#d0d7de;--color-border-muted:#d8dee4;--color-neutral-muted:rgba(175,184,193,.2);--color-accent-fg:#0969da;--color-accent-emphasis:#0969da;--color-attention-subtle:#fff8c5;--color-danger-fg:#cf222e;color-scheme:light}.markdown-body{margin:0 auto;max-width:720px;padding:0 20px 20px}h1{border-bottom:none!important}.gg-logo{text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;line-height:0;outline:none;text-align:center;text-transform:none;vertical-align:-.125em}.gg-logo,.gg-theme-toggle{cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.gg-nav{height:var(--layout-header-height)}.gg-nav *{transition:none}.gg-nav .icons,.gg-nav .nav-screen nav li{align-items:center;display:flex}.gg-nav .nav-screen nav li{color:var(--gg-icon);cursor:pointer;font-weight:700;list-style:none}@media screen and (max-width:720px){.gg-nav{align-items:center;display:flex}.gg-nav .nav-icon{cursor:pointer;height:24px;overflow:hidden;width:24px}.gg-nav .nav-icon span{background:#999;display:block;height:3px;margin:4px 0;transition:all .3s ease;width:24px}.gg-nav .nav-icon .top{-webkit-transform:translateX(6px);transform:translateX(6px)}.gg-nav .nav-icon .bottom{-webkit-transform:translateX(8px);transform:translateX(8px)}.gg-nav .nav-icon.active .top{-webkit-transform:rotate(225deg) translateY(-5px) translateX(-5px);transform:rotate(225deg) translateY(-5px) translateX(-5px)}.gg-nav .nav-icon.active .middle{-webkit-transform:translateX(24px);transform:translateX(24px)}.gg-nav .nav-icon.active .bottom{-webkit-transform:rotate(135deg) translateY(5px) translateX(-5px);transform:rotate(135deg) translateY(5px) translateX(-5px)}.nav-icon{display:block}.nav-screen{background-color:var(--theme-header-background-color);height:0;left:0;overflow:hidden;position:fixed;top:var(--layout-header-height);transition:height .15s ease-out;width:100%;z-index:1000}.nav-screen>div{padding:20px}.nav-screen.open{height:calc(100vh - var(--layout-header-height))}.nav-screen nav{font-size:16px;text-align:center}.nav-screen nav svg{font-size:24px;margin-right:10px}.nav-screen nav li{justify-content:center;padding:8px 0}.nav-screen .icons{justify-content:center;margin-top:40px}.nav-screen .icons .icon-action{margin:0 10px}}@media screen and (min-width:721px){.nav-icon{display:none}.nav-screen{height:100%;justify-content:space-between}.nav-screen,.nav-screen>div{display:flex}.nav-screen .icons .icon-action{margin:0 5px}.nav-screen nav{margin-right:20px}.nav-screen nav svg{margin-right:4px}.nav-screen nav li{float:left;font-size:14px;height:100%;margin-right:20px}}#gg-backtop{align-items:center;border-radius:50%;bottom:20px;box-shadow:inset 0 0 5px hsla(0,0%,59%,.5);cursor:pointer;display:flex;height:42px;justify-content:center;position:fixed;right:20px;transition:all .5s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:42px}@media screen and (max-width:767px){#gg-backtop{height:36px;width:36px}}#gg-backtop svg{width:50%}#gg-backtop.hide{opacity:0;-webkit-transform:scale(0);transform:scale(0)}#gg-backtop.show{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.gg-container{display:flex;flex-direction:column;min-height:100vh}.gg-container header{align-items:center;background-color:#fff;background-color:var(--theme-header-background-color);border-bottom:1px solid hsla(0,0%,47%,.2);box-shadow:0 1px 2px rgba(0,0,0,.05),0 1px 4px rgba(0,0,0,.05),0 2px 8px rgba(0,0,0,.05);display:flex;height:var(--layout-header-height);justify-content:space-between;padding:0 16px;position:fixed;top:0;width:100%;z-index:999}.gg-container header .imglogo{border:1px solid var(--gg-border);border-radius:8px;cursor:pointer;width:32px}.gg-container main{background-color:var(--theme-content-background-color);min-height:calc(100vh - var(--layout-footer-height));padding-top:80px}.gg-container footer{align-items:center;background-color:var(--theme-footer-background-color);color:#838c95;display:flex;font-size:14px;height:var(--layout-footer-height);justify-content:center;padding:0 10px;position:relative;text-align:center;width:100%}.gg-container footer:after{background:radial-gradient(hsla(0,0%,59%,.6),transparent 80%);content:"";display:block;height:1px;position:absolute;top:0;width:100%}.gg-container footer img{vertical-align:middle}.gg-container footer .owner{color:#3486e2;cursor:pointer;margin-left:5px;text-decoration:none}.gg-container footer .copyright{margin-left:10px}.gg-container footer .powered{margin-left:5px}@media screen and (max-width:720px){.gg-container footer{flex-direction:column}.gg-container footer .copyright,.gg-container footer .powered{margin-left:0;margin-top:5px}}.issues-page h1{text-align:center}.author-info{margin-bottom:3px}.author-info .author{cursor:pointer}.author-info .author .name{font-weight:500}.author-info .author img{border-radius:50%;margin-right:5px;vertical-align:middle;width:30px}.author-info i,.author-info span{font-size:14px}.author-info .date{margin-left:10px;opacity:.4}.author-info .number{float:right;line-height:26px;opacity:.3}.gg-category{background:hsla(0,0%,71%,.3)!important;border-radius:4px;display:inline-block;font-size:10px;font-weight:700;height:18px;line-height:18px;margin-right:10px;padding:0 5px;text-decoration:none!important;vertical-align:middle}.gg-category,.issues-num{color:var(--color-fg-default)!important;cursor:pointer}.issues-num{font-family:lab;font-style:italic;font-variation-settings:"size" 30,"quad" 40,"bevl" 20,"oval" 30;opacity:.6}.home-page .issues-list{max-width:unset}.home-page .issues-list>div{display:flex;flex-wrap:wrap;margin:0 auto;max-width:960px}.home-page .issues-list .author-info{margin-bottom:3px}.home-page .issues-list .author-info .author img{width:24px}.home-page .issues-list .author-info i,.home-page .issues-list .author-info span{font-size:12px}.home-page .issues-list .author-info .number{float:right;line-height:26px;opacity:.3}.home-page .issues-list .post-info .title{font-size:15px;font-weight:700;text-decoration:none;vertical-align:middle}@media screen and (min-width:721px){.home-page .issues-list .item{border:1px solid var(--gg-border);border-radius:5px;margin:0 10px 20px;max-width:100%;min-width:200px;overflow:hidden;width:calc(50% - 20px)}.home-page .issues-list .item .author-info{background-color:var(--gg-border);padding:3px 5px}.home-page .issues-list .item .post-info{padding:5px}}@media screen and (max-width:720px){.home-page .issues-list .item{border-bottom:1px solid hsla(0,0%,59%,.2);padding:15px 0 12px;width:100%}.home-page .issues-list .item .author-info{margin-bottom:5px}}.gg-label{border-radius:4px;border-style:solid;border-width:1px;cursor:pointer;display:inline-block;font-size:12px;height:18px;line-height:17px;overflow:hidden;vertical-align:middle}.gg-label b{color:#fff;padding:0 3px 0 2px}.gg-label b,.gg-label em{display:inline-block;height:100%}.gg-label em{border-bottom-right-radius:3px;border-top-right-radius:3px;color:var(--theme-text);padding:0 3px}.gg-issues-prev-next{align-items:stretch;border:1px solid hsla(0,0%,59%,.3);border-radius:5px;display:flex;margin:30px 0}.gg-issues-prev-next:after{clear:both;content:"";display:block}.gg-issues-prev-next a{flex:1 1;padding:15px 10px;width:50%}.gg-issues-prev-next a>span{align-items:center;display:flex;height:100%}.gg-issues-prev-next a .icon-action{min-width:20px}.gg-issues-prev-next .prev{text-align:left}.gg-issues-prev-next .prev>span{float:left}.gg-issues-prev-next .prev .icon-action{margin-right:5px}.gg-issues-prev-next .next{text-align:right}.gg-issues-prev-next .next>span{float:right}.gg-issues-prev-next .next .icon-action{margin-left:5px}@media screen and (max-width:720px){.gg-issues-prev-next{font-size:14px}}.issues-page h1{font-size:24px}.issues-page h1>span{background:linear-gradient(180deg,transparent 50%,hsla(0,0%,71%,.5) 0);padding:0 5px}.issues-page h1 .issues-num{font-size:18px;margin-right:10px}.issues-page .widget{margin-bottom:20px;text-align:center}.issues-page .gg-label{margin:2px 4px}.issues-page .ques-content{display:flex;margin-top:5px;min-height:120px}.issues-page .ques-content .quesicon{margin-right:3px}.issues-page .ques-content .quescontent{width:100%}.issues-page .vote{align-items:center;display:flex;flex-direction:column;font-style:normal}.issues-page .answer-content .answericon{background-color:hsla(0,0%,71%,.3);border-radius:5px;margin-bottom:20px;padding:5px 0 0;text-align:center}.issues-page .comments-item{border-left:1px solid hsla(0,0%,71%,.3);padding-bottom:1px;padding-left:3px}.issues-page .comments-item-content{margin-left:20px}.labels-category-page .gg-label-category-head{margin-bottom:20px;position:-webkit-sticky;position:sticky;top:56px}.labels-category-page .category-group{display:flex;width:100%}.labels-category-page .category-group .label-category{color:#fff;cursor:pointer;display:inline-block;font-weight:700;height:36px;line-height:36px;padding:0 10px;text-shadow:0 1px 1px rgba(80,80,80,.5)}.labels-category-page .category-group .label-category.active{color:#000}.labels-category-page .level-group .label-level{background-color:#000;color:#fff;cursor:pointer;display:inline-block;font-size:16px;font-size:14px;height:24px;line-height:24px;margin-right:1px;opacity:.5;padding:0 10px}.labels-category-page .level-group .label-level.active{opacity:1}.labels-category-page .level-group .label-level.level1{background-color:#3c3c3c}.labels-category-page .level-group .label-level.level2{background-color:#555}.labels-category-page .level-group .label-level.level3{background-color:#6f6f6f}.labels-category-page .level-group .label-level.level4{background-color:#888}.labels-category-page .level-group .label-level.level5{background-color:#a2a2a2}.labels-category-page .issues-list .item{background-color:var(--gg-border);border-radius:5px;margin-bottom:10px;padding:10px}.labels-category-page .issues-list .item .label-issue{margin-right:10px}.labels-category-page .issues-list .labels-list{font-size:12px;margin-top:4px}.labels-category-page .issues-list .labels-list .gg-label{margin-bottom:4px;margin-right:4px}.labels-category-page .issues-list .post-info{font-weight:700;margin-top:5px}.issues-list .issues-item{align-items:baseline;display:flex;margin-bottom:10px;text-align:left}.issues-list .issues-item .issues-num{font-size:12px;margin-right:10px}.issues-list .issues-item .title{font-weight:700}.labels-page{text-align:center}.labels-page .markdown-body{display:inline-block}.labels-page .labels-head{border-radius:5px;color:#fff;cursor:pointer;display:block;font-weight:700;margin-bottom:20px;padding:5px 10px;text-shadow:0 1px 2px #000}.labels-page .labels-head:hover{text-decoration:none!important}.labels-page .label-desc{font-weight:700;opacity:.5}.nav-category-page .gg-category{font-size:14px;font-weight:700;height:36px;line-height:36px;margin:10px;padding:0 12px}.nav-labels-page .gg-label{font-size:16px;font-weight:700;height:30px;line-height:29px;margin:5px}.nav-labels-page .gg-label b,.nav-labels-page .gg-label em{padding:0 10px}</style><link rel="icon" href="/favicon-32x32.png?v=fdd225e9135e951b972a3dc20604182e" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=fdd225e9135e951b972a3dc20604182e"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=fdd225e9135e951b972a3dc20604182e"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=fdd225e9135e951b972a3dc20604182e"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=fdd225e9135e951b972a3dc20604182e"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=fdd225e9135e951b972a3dc20604182e"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=fdd225e9135e951b972a3dc20604182e"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=fdd225e9135e951b972a3dc20604182e"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=fdd225e9135e951b972a3dc20604182e"/><link as="script" rel="preload" href="/webpack-runtime-4fee7405b8a071e8c34e.js"/><link as="script" rel="preload" href="/framework-86c8a5417e68dc3cefff.js"/><link as="script" rel="preload" href="/app-7383f855f15f63329e5f.js"/><link as="script" rel="preload" href="/fc369a2ef6459b03f38591687cef4a587495c716-f468df31cbdaf6ffa970.js"/><link as="script" rel="preload" href="/component---src-templates-issues-tsx-d807dcc2af9625aeadb6.js"/><link as="fetch" rel="preload" href="/page-data/issues/58/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/151096407.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2861350382.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><script>
(function() {
  window.__onThemeChange = function() {};
  function setTheme(newTheme) {
    window.__theme = newTheme;
    preferredTheme = newTheme;
    document.querySelector('html').className = newTheme;
    window.__onThemeChange(newTheme);
  }
  var preferredTheme;
  try {
    preferredTheme = localStorage.getItem('theme');
  } catch (err) { }
  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme);
    try {
      localStorage.setItem('theme', newTheme);
    } catch (err) {}
  }
  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  });

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
})()</script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="gg-container issues-page"><header><img class="imglogo" src="/static/logo-fe174465633f84724b37eea28a42c520.png" alt="logo"/><div class="gg-nav"><span class="nav-icon"><span class="top"></span><span class="middle"></span><span class="bottom"></span></span><div class="nav-screen"><div><nav><li><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" style="color:var(--gg-icon)" class="icon-action" font-size="20" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M5.5 9A1.5 1.5 0 0 0 7 7.5A1.5 1.5 0 0 0 5.5 6A1.5 1.5 0 0 0 4 7.5A1.5 1.5 0 0 0 5.5 9m11.91 2.58c.36.36.59.86.59 1.42c0 .55-.22 1.05-.59 1.41l-5 5a1.996 1.996 0 0 1-2.83 0l-6.99-6.99C2.22 12.05 2 11.55 2 11V6c0-1.11.89-2 2-2h5c.55 0 1.05.22 1.41.58l7 7m-3.87-5.87l1-1l6.87 6.87c.37.36.59.87.59 1.42c0 .55-.22 1.05-.58 1.41l-5.38 5.38l-1-1L20.75 13l-7.21-7.29Z"/></svg>Labels</li><li><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" style="color:var(--gg-icon)" class="icon-action" font-size="20" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M3 3h18v4H3V3m1 5h16v13H4V8m5.5 3a.5.5 0 0 0-.5.5V13h6v-1.5a.5.5 0 0 0-.5-.5h-5Z"/></svg>Archives</li></nav><div class="icons"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" style="color:var(--gg-icon)" class="gg-theme-toggle icon-action" font-size="20" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="m3.55 18.54l1.41 1.41l1.8-1.79l-1.42-1.42M11 22.45h2V19.5h-2m1-14a6 6 0 0 0-6 6a6 6 0 0 0 6 6a6 6 0 0 0 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.66l1.8 1.79l1.41-1.41l-1.79-1.8m1.79-12.28l-1.41-1.41l-1.8 1.79l1.42 1.42M13 .55h-2V3.5h2m-9 7H1v2h3m2.76-7.66l-1.8-1.79l-1.41 1.41l1.79 1.8l1.42-1.42Z"/></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" style="color:var(--gg-icon)" class="icon-action" font-size="20" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z"/></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" style="color:var(--gg-icon)" class="icon-action" font-size="20" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></div></div></div></div></header><main><div class="content"><div class="markdown-body"><h1><span><a class="number issues-num" href="https://github.com/awesome-ops/awesome-ops.github.io/issues/58" target="_blank">#58</a><span>moby/buildkit: 增强 Docker build 的功能，支持并行构建、缓存、镜像导出等功能</span></span></h1><div class="widget"><a class="gg-label" style="border-color:#25B472" href="/labels/更多"><b style="background:#25B472">#</b><em>更多</em></a><a class="gg-label" style="border-color:#abbcfb" href="/labels/docker-tools"><b style="background:#abbcfb">#</b><em>Docker-Tools</em></a><a class="gg-label" style="border-color:#0791ef" href="/labels/moby"><b style="background:#0791ef">#</b><em>moby</em></a></div><div><div class="author-info"><span class="author" title="https://github.com/eryajf"><img src="https://avatars.githubusercontent.com/u/33259379?u=e4a4090a38ac2473aaed4ef9945233636776c6c3&amp;v=4" alt="eryajf"/><span>eryajf</span></span><i class="date">2025/05/21</i></div><div class="ques-content"><div class="quescontent"><div align="center" dir="auto">
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/a15b413168923d02e21292705ceaf86b92675f98e250c5c896a02ba7504a6eae/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f657279616a662f7475406d61696e2f696d672f696d6167655f32303234303432305f3231343430382e676966"><img src="https://camo.githubusercontent.com/a15b413168923d02e21292705ceaf86b92675f98e250c5c896a02ba7504a6eae/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f657279616a662f7475406d61696e2f696d672f696d6167655f32303234303432305f3231343430382e676966" width="100%" height="3" data-animated-image="" data-canonical-src="https://cdn.jsdelivr.net/gh/eryajf/tu@main/img/image_20240420_214408.gif" style="max-width: 100%; height: auto; max-height: 3px;"></a><br><br></p>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th align="right">Repos</th>
<th align="left"><a href="https://github.com/moby/buildkit">moby/buildkit</a></th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><strong>Views</strong></td>
<td align="left"><a href="https://github.com/opsre/awesome-ops"><img src="https://camo.githubusercontent.com/4cb8e73504258e1c8b7a3dc45143a3bd3510a01df48cae081e9be136a80e7de8/68747470733a2f2f76696577732e77686174696c656172656e65642e746f6461792f76696577732f6769746875622f6d6f62792f6275696c646b69742e737667" alt="views" data-canonical-src="https://views.whatilearened.today/views/github/moby/buildkit.svg" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="right"><strong>Stars</strong></td>
<td align="left"><a href="https://github.com/opsre/awesome-ops"><img src="https://camo.githubusercontent.com/8ec6beae801b63494f4e2d05da807a14842e79570f46c8cd971e064fe017dd89/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f6d6f62792f6275696c646b69743f636f6c6f723d663266303864266c6f676f3d556e64657274616c65266c6f676f436f6c6f723d656234363330" alt="stars" data-canonical-src="https://img.shields.io/github/stars/moby/buildkit?color=f2f08d&amp;logo=Undertale&amp;logoColor=eb4630" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="right"><strong>Forks</strong></td>
<td align="left"><a href="https://github.com/opsre/awesome-ops"><img src="https://camo.githubusercontent.com/43c12587fa70a25f0db410ae0fa8b3b37fb738ee6140174d74b83cee2f10f0a1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f666f726b732f6d6f62792f6275696c646b69743f636f6c6f723d626138366562266c6f676f3d48616e647368616b65266c6f676f436f6c6f723d656136616136" alt="forks" data-canonical-src="https://img.shields.io/github/forks/moby/buildkit?color=ba86eb&amp;logo=Handshake&amp;logoColor=ea6aa6" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="right"><strong>License</strong></td>
<td align="left"><a href="https://github.com/opsre/awesome-ops"><img src="https://camo.githubusercontent.com/08625bcbb5f29a74c3656522913365568baf5b609df2f978cebcd02552dbd451/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d6f62792f6275696c646b69743f6c6f676f3d64617461253341696d616765253246706e672533426261736536342532436956424f5277304b47676f414141414e53556845556741414144414141414177434159414141425841766d48414141414358424957584d41414173544141414c457745416d70775941414144336b6c45515652346e4f335953557a5555426748384a726f57567255474a66456d3773584e63534446784d544c327069347348456778654e526f77586770455742445552522532424e414e4f4b4f4b36366f6f4b4a4742586545475263574163455646475152484677516d483525324630774861655748493944554455354c356b6e6568644f62377a66652532423139636e434a47495243516945596c514237594a4979474c38616f73756c565a36695246516a69474b6b7564576735614c6c704f70704e586e665071773555304459524a6d56786a4367464633424c755a476d416f5655694b4541726d583744375553677351706f72674761336748664b34483663754262435644334771683141352532424c6745253242467749656e514d306a6f446f66714c6f48564e7742796d384370546e416d327a51713073676478624964515a556c416b7150415a3664676a303541446f59526f6f66792532466f5869726f376b3551586a4c6f70677a4b69514e6c4c4461716f4967754577426a7a7150355066446a45394479495879493633464d547751464d43567271774e61763451666f52673538514625324266724d485172454b3844546f434d714e4179574e4866786d54526f4c4f726d5352566747744466714345715a4f4851727a6f34706243557341333431365169364551394b476a6345465267484f724f4b6e5536574162396247455459656b4b7843766a546167394534706a653534446b3551503862624d4859762532464333756541654a6b50304f4778422532424a70426e4172595238455951516e6f4e31414e4661426e5050356c385372736559514c303641646b30464a5938484f5761424d6c6541486a683068506f73497a6c6f3876304125324633345a694f6548726130714b52504d5653493774762532423932747725324676687855654252713456454c674d376642714b354770526d6f514c584e7075625475367a6f4e52706754386e5051627138347764253246494375767978694b4871694e41664933774d367549684271476b4c696977414f734b44714f68743749747239567938536a52424557667941627225324668523142667056514664484a42253246423268683778376a36517077435665655951326b72554235436c636a3641326d3067576a25324244306d4c34397a573563517943484c4e37726a6c6d6d6174457958582532464372547a412532466f51785a6b576c39474a5443566f25324279546a3837253242346769504b6376307149486f344156344430565a727251493334706e70524d36357875652532467a417265453425324654253246536f676c664542794d7369517441546c4c3352414a355948725378365a44665337307337754d486842705225324659423573305057366f455270316236253246667252684b3353444c35546965364f515548516c5133735644752532427a50636b397657453973747225324236496a533967486d5750616861444a25324277434b364e494242587348423948796b587378774470686c436d416476706c6162554a4e6e5a504239342532464e7436784f6538587a4562503257684d335741673147756236744825324233513150673337365239713475716c6e6f36676448476a444f5139306562303141484d3672596975554a314f713472344656756a35765239427a4d3957674e764f7977446869495951467667626366774166774d764863615067425041253246447948476a50624e394138616d6562636477416444354e6633373574787165774e5552656f797677424958594c645170576c6877465771745061435044334173467541535636717171496c62304a766b564331464c39576b4c55556c55574b337a585a4c46432532423125324642726f46746f364f7358497545594a5034447a7a5732594656316f4a614141414141456c46546b5375516d4343" alt="license" data-canonical-src="https://img.shields.io/github/license/moby/buildkit?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD3klEQVR4nO3YSUzUUBgH8JroWVrUGJfEm7sXNcSDFxMTL2pi4sHEgxeNRowXgpEWBDURR%2BNANOKOK66ooKJGBXeEGRcWAcEVFGQRHFwQmH5%2F0wHaeWHI9DUDU5L5knehdOb7zfe%2B19cnCJGIRCQiEYlQB7YJIyGL8aosulVZ6iRFQjiGKkudWg5aLlpOppNXnfPqw5U0DYRJmVxjCgFF3BLuZGmAoVUiKEArmX7D7USgsQporgGa3gHfK4H6cuBbCVD3Gqh1A5%2BLgE%2BFwIenQM0joDofqLoHVNwBym8CpTnAm2zQq0sgdxbIdQZUlAkqPAZ6dgj05ADoYRoofy%2FoXiro7k5QXjLopgzKiQNlLDaqoIguEwBjzqP5PfDjE9DyIXyI63FMTwQFMCVrqwNav4QfoRg58QF%2BfrMHQrEK8DToCMqNAyWNHfxmTRoLOrmSRVgGtDfqCEqZOHQrzo4pbCUsA3416Qi6EQ9KGjcEFRgHOrOKnU6WAb9bGETYekKxCvjTag9E4pje54Dk5QP8bbMHYv%2FC3ueAeJkP0OGxB%2BJpBnArYR8EYQQnoN1ANFaBnPP5l8SrseYQL06Adk0FJY8HOWaBMleAHjh0hPosIzlo8v0A%2F34ZiOeHra0qKRPMVSI7tv%2B92tw%2FvhxUeBRq4VELgM7fBqK5GpRmoQLXNpubTu6zoNRpgT8nPQbq84wd%2FICuvyxiKHqiNAfI3wM6uIhBqGkLiiwAOsKDqOht7Itr9Vy8SjRBEWfyAbr%2FhR1BfpVQFdHJB%2FB2hh7x7j6QpwCVeeYQ2krUB5Clcj6A2m0gWj%2BD0mL49zW5cQyCHLN7rjlmmatEyXX%2FCrTzA%2FoQxZkWl9GJTCVo%2ByTj87%2B4giPKcv0qIHo4AV4D0VZrrQI34pnpRM65xue%2FzAreE4%2FT%2FSoglfEByMsiQtATlL3RAJ5YHrSx6ZDfS70s7uMHhBpR%2FYB5s0PW6oERp1b6%2FfrRhK3SDL5Tie6OQUHQlQ3sVDu%2BzPck9vWE9str%2B6IjS9gHmWPahaDJ%2BwCK6NIBBXsHB9HykXsxwDphlCmAdvplabUJNnZPB94%2FNt6xOe8XzEbP2WhM3WAg1Gub6tH%2B3Q1Pg376R9q4uqlno6gdHGjDOQ90eb01AHM6rYiuUJ1Oq4r4FVuj5vR9BzM9WgNvOywDhiIYQFvgbcfwAfwMvHcaPgBPA%2FDyHGjPbN9A8amebcdwAdD5Nf375txqewNUReoyvwBIXYLdQpWlhwFWqtPaCPD3AsFuASV6qqqIlb0JvkVC1FL9WkLUUlUWK3zXZLFC%2B1%2FBroFto6OsXIuEYJP4DzzW2YFV1oJaAAAAAElFTkSuQmCC" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="right"><strong>UpdatedAt</strong></td>
<td align="left"><a href="https://github.com/opsre/awesome-ops"><img src="https://camo.githubusercontent.com/05287bd911df41fbe18a32b305736c73a77e23ae57fb6e3d0a8ac9d8d6e4e582/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f6d6f62792f6275696c646b69743f646973706c61795f74696d657374616d703d636f6d6d6974746572266c6f676f3d64617461253341696d616765253246706e672533426261736536342532436956424f5277304b47676f414141414e5355684555674141414234414141416543415941414141374d4b3669414141414358424957584d41414173544141414c457745416d7077594141414648556c45515652346e4c5658375539615678776d3236646c582532466468627825324232253246516e626b7655627264554151674a4a496655444e574454546d4f76314651554661504a346b7573725630314a7431734e70637453327533626f745a746d786439744a5346536f714b71494635625944464c436f76436c656673747a4a387758524c445a4c7a6e6b634f343535376e3364332532466e655a3472454f515a74315771462532423858467234253242664f4c4565326a6f59307a776638546f795a50766a45676b4c592532426b306d6d72584f36644b696e787a476b30666a5430782532425279723055716e6359637a4d317263347451253242497270324c4758646f344e4334567657715453373277716c632532427231334f527269364b6458646e624f484c6c776c7a4a70524b6e3657342532424b36706f4f434e6e494166486a253246253242776168495a4234764b6e715a6630714a704e49716c2532467638545530634e6c3572627963337730516e54703379324c54614a374d314e617844723266526e315370504736476961323174664533345463614f617931694d55564f5146624659714957536f31573854694156616e43306576584f4542375770313448466232327a453566714c4f433545524c515769644e614e49347545636339693768634a6c644868324e57725135674464624f6c7061756d49754c62326174415144506e7a3062384e6257636d785656524a33486d7870536377777a4f4a6d4b44524765384c6c435a444c4739673754496e5631516c376462586256316533675430574b697243466f6d6b5079767758466c5a474a4f6a563625324253743634757564445a4f55354555636f782532464d455144567674364d62634e3237593341797a687633737061557242365a3971724a534f3139657a6a387032704c426b4a792532426343484a7857493567573574636652527a31645531394766476b6f7539505a4f34736d52396a4746777065783444793362766e6d4b79706f74625531335669646a71595a68726a343972764d457425324625324659714c7a396430304e6a57253246637a67796f394f35317a7336614e6c6f354644747530445a675146686c47584a30644241446f4e6864367576703657686f617967374e394c564748386d443462253246486e667455516f4e4734764c51306769784d716c5725324234714f6a744e48446733723166365969525347785279375576714c62395534716b716e78504f4e7661356c447048723125324279794b524e4b57425a793565644d554842326d3572792532422532424551772532427a6766347a6f39253246306f634e3357527a4c4277344a2532424a7950574372716d4967475974554f735744346f785a46516f50556a4770564871493425324661666b51504336665a5165654d31253242764c7549516e6a754257514444437363726d485039656f4e5041744271664f6e5875614b25324268364a45624772732532427076764d6d78654962683836336162565065597953456f39464a48704e4d464a59253242503563575a6b6667374f3174537759436553514c54593345385130392532464256504a556c78516a7368543142736343593032723955445542667643484236367063665041336c794165336e6772332532463437584467614a7a736c7937787741364e5a746c555550437541487161536a5549502532427375653842525741432532464e6651374a5a505a35397330476a3756747049537a34685125324243706658474d4b685a63764c70554b7866574d386f68766637702532464f446a4842666356463849736b383267314648796b63564645253242555a414158343761452532464d6c34504f3530506e75683025324678346e6d637957507364774468427836436d6b4c562532466746446a594b784f4a4f4674623077517949684c39527943774b33414f664947703159464542686e4d4a634c525745624b644b516f55366e63545a6b494544696341792532463831645675454d3552775066657934784f7830496b25324649324e6e466b692532425761664f6f464959466367595a43797864376543556a626334416d46363566742532466b4d686b336f25324235686337734d4a79716a4a45477659466151464972375930775077384246415925324236253242766d6b3377367a7a5275444d6d5a5652736668385274413075455453443775434254364459514e36697665553066706b594c6a453671725672744f78654e4b553954484c5a4a396b4255324a427342685635416976422532466f4b61514e4b675043427744596149665a4334616454684f71463457454e56694c4a77566f586f62664c424b56773637414f6154734c6336355461564b32317651344c613939654b6359673576627873624f627a5451394e37554b4467554f3177446a6944494942736868357a746733396e514d4c535a4248344f7a424f55444551586d323036643366634c67737762585141345068634b336e6873775531427a3877765130395248472532466f597933656a6677424e6d746f59714c4130586741414141424a52553545726b4a676767253344253344266c6162656c3d557064617465644174" alt="last-commit" data-canonical-src="https://img.shields.io/github/last-commit/moby/buildkit?display_timestamp=committer&amp;logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHUlEQVR4nLVX7U9aVxwm26dlX%2Fdhbx%2B2%2FQnbkvUbrdUAQgJJIfUDNWDTTmOv1FQUFaPJ4kusrV01Jt1sNpctS2u3botZtmxd9tJSFSoqKqIF5bYDFLCovClefstzJ8wXRLDZLznkcO4557n3d3%2FneZ4rEOQZt1WqF%2B8XFr4%2BfOLEe2joY0zwf8ToyZPvjEgkLY%2Bk0mmrXO6dKinxzGk0fjT0x%2BRyr0UqncYczM1rc4tQ%2BIrp2LGXdo4NC4VvWqTS72wqlc%2Br13ORri6KdXdnbOHLlwlzJpRKn6W4%2BK6poOCNnIAfHj%2F%2BwahIZB4vKnqZf0qJpNIql%2Fv8TU0cNl5rbyc3w0QnTp3y2LTaJ7M1NaxDr2fRn1SpPG6Gia21tfE34TcaOay1iMUVOQFbFYqIWSo1W8TiAVanC0evXOEB7Wp14HFb22zE5fqLOC5ERLQWidNaNI4uEcc9i7hcJldHh2NWrQ5gDdbOlpaumIuLb2atAQDPnz0b8NbWcmxVVRJ3HmxpScwwzOJmKDRGe8LlCZDLG9g7TInV1Ql7dbXbV1e3gT0WKirCFomkPyvwXFlZGJOjV6%2BSt64uudDZOU5EUcox%2FMEQDVvt6MbcN27Y3Ayzhv3spaUrB6Z9qrJSO19ezj8p2pLBkJy%2BcCHJxWI5gW5tcfRRz1dU19GfGkou9PZO4smR9jGFwpex4Dy3bvnmKypotbU13VidjqYZhrj49rvMEt%2F%2FYqLz9d00NjW%2Fczgyo9O51zs6aNlo5FDtu0DZgQFhlGXJ0dBADoNhd6uvp6Whoayg7N9LVGH8mD4b%2FHnftUQoNG4vLQ0gixMqlW%2B4qOjtNHDg3r1f6YiRSGxRy7UvqLb9U4qkqnxPONva5lDpHr1%2ByyKRNKWBZy5edMUHB2m5ry%2B%2BEQw%2Bzgf4zo9%2F0ocN3WRzLBw4J%2BJyPWCrqmIgGYtUOsWD4oxZFQoPUjGpVHqI4%2FafkQPC6fZQeeM1%2BvLuIQnjuBWQDDCscrmHP9eoNPAtBqfOnXuaK%2Bh6JEbGrs%2BpvvMmxeIbh863abVPeYySEo9FJHpNMFJY%2BP5cWZkfg7O1tSwYCeSQLTY3E8Q09%2FBVPJUlxQjshT1BscCY02r9UDUBfvCHB66pcfPA3lyAe3ngr3%2F47XDgaJzsly7xwA6NZtlUUPCuAHqaSjUIP%2Bsue8BRWAC%2FNfQ7JZPZ59s0Gj7VtpISz4hQ%2BCpfXGMKhZcvLpUKxfWM8ohvf7p%2FODjHBfcVF8Isk82g1FHykcVFE%2BUZAAX47aE%2FMl4PO50Pnuh0%2Fx4nmcyWPsdwDhBx6CmkLV%2FgFDjYKxOJOFtb0wQyIhL9RyCwK3AOfIGp1YFEBhnMJcLRWEbKdKQoU6ncTZkIEDicAy%2F81dVuEM5RwPfey4xOx0Ik%2FI2NnFki%2BWafOoFIYFcgYZCyxd7eCUjbc4AmF65ft%2FkMhk3o%2B5hc7sMJyqjJEGvYFaQFIr7Y0wPw8BFAY%2B6%2Bvmk3w6zzRuDMmZVRsfh8RtA0uETSD7uCBT6DYQN6iveU0fpkYLjE6qrVrtOxeNKU9THLZJ9kBU2JBsBhV5AivB%2FoKaQNKgPCBwDYaIfZC4adThOqF4WENViLJwVoXobfLBKVw67AOaTsLc65TaVK21vQ4La99eKcYg5vbxsbObzTQ9N7UKDgUO1wDjiDIIBshh5ztg39nQMLSZBH4OzBOUDEQXm206d3fcLgswbXQA4PhcK3nhswU1Bz8wvQ09RHG%2FoYy3ejfwBNmtoYqLA0XgAAAABJRU5ErkJggg%3D%3D&amp;label=UpdatedAt" style="max-width: 100%;"></a></td>
</tr>
<tr>
<td align="right"><strong>CreatedAt</strong></td>
<td align="left"><a href="https://github.com/opsre/awesome-ops"><img src="https://camo.githubusercontent.com/5ebc5821a00527f624de9eaf40f6593205eddca1b2e66d19c414094da5d8b56c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f637265617465642d61742f6d6f62792f6275696c646b69743f6c6f676f3d64617461253341696d616765253246706e672533426261736536342532436956424f5277304b47676f414141414e5355684555674141414234414141416543415941414141374d4b3669414141414358424957584d41414173544141414c457745416d7077594141414648556c45515652346e4c5658375539615678776d3236646c582532466468627825324232253246516e626b7655627264554151674a4a496655444e574454546d4f76314651554661504a346b7573725630314a7431734e70637453327533626f745a746d786439744a5346536f714b71494635625944464c436f76436c656673747a4a387758524c445a4c7a6e6b634f343535376e3364332532466e655a3472454f515a74315771462532423858467234253242664f4c4565326a6f59307a776638546f795a50766a45676b4c592532426b306d6d72584f36644b696e787a476b30666a5430782532425279723055716e6359637a4d317263347451253242497270324c4758646f344e4334567657715453373277716c632532427231334f527269364b6458646e624f484c6c776c7a4a70524b6e3657342532424b36706f4f434e6e494166486a253246253242776168495a4234764b6e715a6630714a704e49716c2532467638545530634e6c3572627963337730516e54703379324c54614a374d314e617844723266526e315370504736476961323174664533345463614f617931694d55564f5146624659714957536f31573854694156616e43306576584f4542375770313448466232327a453566714c4f433545524c515769644e614e49347545636339693768634a6c644868324e57725135674464624f6c7061756d49754c62326174415144506e7a3062384e6257636d785656524a33486d7870536377777a4f4a6d4b44524765384c6c435a444c4739673754496e5631516c376462586256316533675430574b697243466f6d6b5079767758466c5a474a4f6a563625324253743634757564445a4f55354555636f782532464d455144567674364d62634e3237593341797a687633737061557242365a3971724a534f3139657a6a387032704c426b4a792532426343484a7857493567573574636652527a31645531394766476b6f7539505a4f34736d52396a4746777065783444793362766e6d4b79706f74625531335669646a71595a68726a343972764d457425324625324659714c7a396430304e6a57253246637a67796f394f35317a7336614e6c6f354644747530445a675146686c47584a30644241446f4e6864367576703657686f617967374e394c564748386d443462253246486e667455516f4e4734764c51306769784d716c5725324234714f6a744e48446733723166365969525347785279375576714c62395534716b716e78504f4e7661356c447048723125324279794b524e4b57425a793565644d554842326d3572792532422532424551772532427a6766347a6f39253246306f634e3357527a4c4277344a2532424a7950574372716d4967475974554f735744346f785a46516f50556a4770564871493425324661666b51504336665a5165654d31253242764c7549516e6a754257514444437363726d485039656f4e5041744271664f6e5875614b25324268364a45624772732532427076764d6d78654962683836336162565065597953456f39464a48704e4d464a59253242503563575a6b6667374f3174537759436553514c54593345385130392532464256504a556c78516a7368543142736343593032723955445542667643484236367063665041336c794165336e6772332532463437584467614a7a736c7937787741364e5a746c555550437541487161536a5549502532427375653842525741432532464e6651374a5a505a35397330476a3756747049537a34685125324243706658474d4b685a63764c70554b7866574d386f68766637702532464f446a4842666356463849736b383267314648796b63564645253242555a414158343761452532464d6c34504f3530506e75683025324678346e6d637957507364774468427836436d6b4c562532466746446a594b784f4a4f4674623077517949684c39527943774b33414f664947703159464542686e4d4a634c525745624b644b516f55366e63545a6b494544696341792532463831645675454d3552775066657934784f7830496b25324649324e6e466b692532425761664f6f464959466367595a43797864376543556a626334416d46363566742532466b4d686b336f25324235686337734d4a79716a4a45477659466151464972375930775077384246415925324236253242766d6b3377367a7a5275444d6d5a5652736668385274413075455453443775434254364459514e36697665553066706b594c6a453671725672744f78654e4b553954484c5a4a396b4255324a427342685635416976422532466f4b61514e4b675043427744596149665a4334616454684f71463457454e56694c4a77566f586f62664c424b56773637414f6154734c6336355461564b32317651344c613939654b6359673576627873624f627a5451394e37554b4467554f3177446a6944494942736868357a746733396e514d4c535a4248344f7a424f55444551586d323036643366634c67737762585141345068634b336e6873775531427a3877765130395248472532466f597933656a6677424e6d746f59714c4130586741414141424a52553545726b4a676767253344253344266c6162656c3d437265617465644174" alt="create-at" data-canonical-src="https://img.shields.io/github/created-at/moby/buildkit?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHUlEQVR4nLVX7U9aVxwm26dlX%2Fdhbx%2B2%2FQnbkvUbrdUAQgJJIfUDNWDTTmOv1FQUFaPJ4kusrV01Jt1sNpctS2u3botZtmxd9tJSFSoqKqIF5bYDFLCovClefstzJ8wXRLDZLznkcO4557n3d3%2FneZ4rEOQZt1WqF%2B8XFr4%2BfOLEe2joY0zwf8ToyZPvjEgkLY%2Bk0mmrXO6dKinxzGk0fjT0x%2BRyr0UqncYczM1rc4tQ%2BIrp2LGXdo4NC4VvWqTS72wqlc%2Br13ORri6KdXdnbOHLlwlzJpRKn6W4%2BK6poOCNnIAfHj%2F%2BwahIZB4vKnqZf0qJpNIql%2Fv8TU0cNl5rbyc3w0QnTp3y2LTaJ7M1NaxDr2fRn1SpPG6Gia21tfE34TcaOay1iMUVOQFbFYqIWSo1W8TiAVanC0evXOEB7Wp14HFb22zE5fqLOC5ERLQWidNaNI4uEcc9i7hcJldHh2NWrQ5gDdbOlpaumIuLb2atAQDPnz0b8NbWcmxVVRJ3HmxpScwwzOJmKDRGe8LlCZDLG9g7TInV1Ql7dbXbV1e3gT0WKirCFomkPyvwXFlZGJOjV6%2BSt64uudDZOU5EUcox%2FMEQDVvt6MbcN27Y3Ayzhv3spaUrB6Z9qrJSO19ezj8p2pLBkJy%2BcCHJxWI5gW5tcfRRz1dU19GfGkou9PZO4smR9jGFwpex4Dy3bvnmKypotbU13VidjqYZhrj49rvMEt%2F%2FYqLz9d00NjW%2Fczgyo9O51zs6aNlo5FDtu0DZgQFhlGXJ0dBADoNhd6uvp6Whoayg7N9LVGH8mD4b%2FHnftUQoNG4vLQ0gixMqlW%2B4qOjtNHDg3r1f6YiRSGxRy7UvqLb9U4qkqnxPONva5lDpHr1%2ByyKRNKWBZy5edMUHB2m5ry%2B%2BEQw%2Bzgf4zo9%2F0ocN3WRzLBw4J%2BJyPWCrqmIgGYtUOsWD4oxZFQoPUjGpVHqI4%2FafkQPC6fZQeeM1%2BvLuIQnjuBWQDDCscrmHP9eoNPAtBqfOnXuaK%2Bh6JEbGrs%2BpvvMmxeIbh863abVPeYySEo9FJHpNMFJY%2BP5cWZkfg7O1tSwYCeSQLTY3E8Q09%2FBVPJUlxQjshT1BscCY02r9UDUBfvCHB66pcfPA3lyAe3ngr3%2F47XDgaJzsly7xwA6NZtlUUPCuAHqaSjUIP%2Bsue8BRWAC%2FNfQ7JZPZ59s0Gj7VtpISz4hQ%2BCpfXGMKhZcvLpUKxfWM8ohvf7p%2FODjHBfcVF8Isk82g1FHykcVFE%2BUZAAX47aE%2FMl4PO50Pnuh0%2Fx4nmcyWPsdwDhBx6CmkLV%2FgFDjYKxOJOFtb0wQyIhL9RyCwK3AOfIGp1YFEBhnMJcLRWEbKdKQoU6ncTZkIEDicAy%2F81dVuEM5RwPfey4xOx0Ik%2FI2NnFki%2BWafOoFIYFcgYZCyxd7eCUjbc4AmF65ft%2FkMhk3o%2B5hc7sMJyqjJEGvYFaQFIr7Y0wPw8BFAY%2B6%2Bvmk3w6zzRuDMmZVRsfh8RtA0uETSD7uCBT6DYQN6iveU0fpkYLjE6qrVrtOxeNKU9THLZJ9kBU2JBsBhV5AivB%2FoKaQNKgPCBwDYaIfZC4adThOqF4WENViLJwVoXobfLBKVw67AOaTsLc65TaVK21vQ4La99eKcYg5vbxsbObzTQ9N7UKDgUO1wDjiDIIBshh5ztg39nQMLSZBH4OzBOUDEQXm206d3fcLgswbXQA4PhcK3nhswU1Bz8wvQ09RHG%2FoYy3ejfwBNmtoYqLA0XgAAAABJRU5ErkJggg%3D%3D&amp;label=CreatedAt" style="max-width: 100%;"></a></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<a href="https://github.com/opsre/awesome-ops">
</a><p dir="auto"><a href="https://github.com/opsre/awesome-ops"><img src="https://camo.githubusercontent.com/b964a36ea4078c39f603d46a29436371c7541a2f26e0228d7b21b9d9805b43d3/68747470733a2f2f736f6369616c6966792e6769742e63692f6f707372652f617765736f6d652d6f70732f696d6167653f6465736372697074696f6e3d3126666f6e743d42697474657226666f726b733d31266973737565733d31266c616e67756167653d31266c6f676f3d6874747073253341253246253246617661746172732e67697468756275736572636f6e74656e742e636f6d25324675253246313838353638303230266e616d653d31266f776e65723d31267061747465726e3d436972637569742b426f6172642670756c6c733d31267374617267617a6572733d31267468656d653d4c69676874" alt="" data-canonical-src="https://socialify.git.ci/opsre/awesome-ops/image?description=1&amp;font=Bitter&amp;forks=1&amp;issues=1&amp;language=1&amp;logo=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F188568020&amp;name=1&amp;owner=1&amp;pattern=Circuit+Board&amp;pulls=1&amp;stargazers=1&amp;theme=Light" style="max-width: 100%;"></a></p>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/a15b413168923d02e21292705ceaf86b92675f98e250c5c896a02ba7504a6eae/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f657279616a662f7475406d61696e2f696d672f696d6167655f32303234303432305f3231343430382e676966"><img src="https://camo.githubusercontent.com/a15b413168923d02e21292705ceaf86b92675f98e250c5c896a02ba7504a6eae/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f657279616a662f7475406d61696e2f696d672f696d6167655f32303234303432305f3231343430382e676966" width="100%" height="3" data-animated-image="" data-canonical-src="https://cdn.jsdelivr.net/gh/eryajf/tu@main/img/image_20240420_214408.gif" style="max-width: 100%; height: auto; max-height: 3px;"></a>
</div>
<p dir="auto"><a href="https://asciinema.org/a/gPEIEo1NzmDTUu2bEPsUboqmU" rel="nofollow"><img src="https://camo.githubusercontent.com/1902755ab22157de1223410b7c9eab5314226ab9517777fa67d33811290fc2b0/68747470733a2f2f61736369696e656d612e6f72672f612f67504549456f314e7a6d44545575326245507355626f716d552e706e67" alt="asciicinema example" data-canonical-src="https://asciinema.org/a/gPEIEo1NzmDTUu2bEPsUboqmU.png" style="max-width: 100%;"></a></p>
<h1 dir="auto">BuildKit </h1>
<p dir="auto"><a href="https://github.com/moby/buildkit/releases/latest"><img src="https://camo.githubusercontent.com/8301b1c4eb7e9e4d400fc3dae90bdbbd1982692dd767b99954b0a801eb410fe3/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6d6f62792f6275696c646b69742e7376673f7374796c653d666c61742d737175617265" alt="GitHub Release" data-canonical-src="https://img.shields.io/github/release/moby/buildkit.svg?style=flat-square" style="max-width: 100%;"></a><br>
<a href="https://pkg.go.dev/github.com/moby/buildkit/client/llb" rel="nofollow"><img src="https://camo.githubusercontent.com/6cb81ff37edfc7f25db77898190cd1b88fbdb215ddab09de8b0340d24a311a49/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f676f2e6465762d646f63732d3030376439633f7374796c653d666c61742d737175617265266c6f676f3d676f266c6f676f436f6c6f723d7768697465" alt="PkgGoDev" data-canonical-src="https://img.shields.io/badge/go.dev-docs-007d9c?style=flat-square&amp;logo=go&amp;logoColor=white" style="max-width: 100%;"></a><br>
<a href="https://github.com/moby/buildkit/actions?query=workflow%3Abuildkit"><img src="https://camo.githubusercontent.com/818b1a54062dd2e2d4e7f6efd6f6391d3a067765805e3ebf2e7538e7d91aad39/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f6d6f62792f6275696c646b69742f6275696c646b69742e796d6c3f6c6162656c3d6275696c646b6974266c6f676f3d676974687562267374796c653d666c61742d737175617265" alt="CI BuildKit Status" data-canonical-src="https://img.shields.io/github/actions/workflow/status/moby/buildkit/buildkit.yml?label=buildkit&amp;logo=github&amp;style=flat-square" style="max-width: 100%;"></a><br>
<a href="https://github.com/moby/buildkit/actions?query=workflow%3Afrontend"><img src="https://camo.githubusercontent.com/026147b7552d292eaee4de07aecec937ddaa14036d9a4e9a9a1ae14141eed8f4/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f6d6f62792f6275696c646b69742f66726f6e74656e642e796d6c3f6c6162656c3d66726f6e74656e64266c6f676f3d676974687562267374796c653d666c61742d737175617265" alt="CI Frontend Status" data-canonical-src="https://img.shields.io/github/actions/workflow/status/moby/buildkit/frontend.yml?label=frontend&amp;logo=github&amp;style=flat-square" style="max-width: 100%;"></a><br>
<a href="https://goreportcard.com/report/github.com/moby/buildkit" rel="nofollow"><img src="https://camo.githubusercontent.com/25537bd5a4e14e2a61ced79f05d86b0d330daa425dc1845f68f08cfaad235f2e/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f6d6f62792f6275696c646b69743f7374796c653d666c61742d737175617265" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/moby/buildkit?style=flat-square" style="max-width: 100%;"></a><br>
<a href="https://codecov.io/gh/moby/buildkit" rel="nofollow"><img src="https://camo.githubusercontent.com/54fd843841feb62e6df9b6e5601e28bbdb0d2f2a96fe6b8e0b560f82c1001132/68747470733a2f2f696d672e736869656c64732e696f2f636f6465636f762f632f6769746875622f6d6f62792f6275696c646b69743f6c6f676f3d636f6465636f76267374796c653d666c61742d737175617265" alt="Codecov" data-canonical-src="https://img.shields.io/codecov/c/github/moby/buildkit?logo=codecov&amp;style=flat-square" style="max-width: 100%;"></a></p>
<p dir="auto">BuildKit is a toolkit for converting source code to build artifacts in an efficient, expressive and repeatable manner.</p>
<p dir="auto">Key features:</p>
<ul dir="auto">
<li>Automatic garbage collection</li>
<li>Extendable frontend formats</li>
<li>Concurrent dependency resolution</li>
<li>Efficient instruction caching</li>
<li>Build cache import/export</li>
<li>Nested build job invocations</li>
<li>Distributable workers</li>
<li>Multiple output formats</li>
<li>Pluggable architecture</li>
<li>Execution without root privileges</li>
</ul>
<p dir="auto">Read the proposal from <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="225189862" data-permission-text="Title is private" data-url="https://github.com/moby/moby/issues/32925" data-hovercard-type="issue" data-hovercard-url="/moby/moby/issues/32925/hovercard" href="https://github.com/moby/moby/issues/32925">moby/moby#32925</a></p>
<p dir="auto">Introductory blog post <a href="https://blog.mobyproject.org/introducing-buildkit-17e056cc5317" rel="nofollow">https://blog.mobyproject.org/introducing-buildkit-17e056cc5317</a></p>
<p dir="auto">Join <code class="notranslate">#buildkit</code> channel on <a href="https://dockr.ly/comm-slack" rel="nofollow">Docker Community Slack</a></p>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">If you are visiting this repo for the usage of BuildKit-only Dockerfile features<br>
like <code class="notranslate">RUN --mount=type=(bind|cache|tmpfs|secret|ssh)</code>, please refer to the<br>
<a href="https://docs.docker.com/engine/reference/builder/" rel="nofollow">Dockerfile reference</a>.</p>
</div>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto"><code class="notranslate">docker build</code> <a href="https://docs.docker.com/build/architecture/" rel="nofollow">uses Buildx and BuildKit by default</a> since Docker Engine 23.0.<br>
You don't need to read this document unless you want to use the full-featured<br>
standalone version of BuildKit.</p>
</div>


<ul dir="auto">
<li><a href="#used-by">Used by</a></li>
<li><a href="#quick-start">Quick start</a>
<ul dir="auto">
<li><a href="#linux-setup">Linux Setup</a></li>
<li><a href="#windows-setup">Windows Setup</a></li>
<li><a href="#macos-setup">macOS Setup</a></li>
<li><a href="#build-from-source">Build from source</a></li>
<li><a href="#exploring-llb">Exploring LLB</a></li>
<li><a href="#exploring-dockerfiles">Exploring Dockerfiles</a>
<ul dir="auto">
<li><a href="#building-a-dockerfile-with-buildctl">Building a Dockerfile with <code class="notranslate">buildctl</code></a></li>
<li><a href="#building-a-dockerfile-using-external-frontend">Building a Dockerfile using external frontend</a></li>
</ul>
</li>
<li><a href="#output">Output</a>
<ul dir="auto">
<li><a href="#imageregistry">Image/Registry</a></li>
<li><a href="#local-directory">Local directory</a></li>
<li><a href="#docker-tarball">Docker tarball</a></li>
<li><a href="#oci-tarball">OCI tarball</a></li>
<li><a href="#containerd-image-store">containerd image store</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#cache">Cache</a>
<ul dir="auto">
<li><a href="#garbage-collection">Garbage collection</a></li>
<li><a href="#export-cache">Export cache</a>
<ul dir="auto">
<li><a href="#inline-push-image-and-cache-together">Inline (push image and cache together)</a></li>
<li><a href="#registry-push-image-and-cache-separately">Registry (push image and cache separately)</a></li>
<li><a href="#local-directory-1">Local directory</a></li>
<li><a href="#github-actions-cache-experimental">GitHub Actions cache (experimental)</a></li>
<li><a href="#s3-cache-experimental">S3 cache (experimental)</a></li>
<li><a href="#azure-blob-storage-cache-experimental">Azure Blob Storage cache (experimental)</a></li>
</ul>
</li>
<li><a href="#consistent-hashing">Consistent hashing</a></li>
</ul>
</li>
<li><a href="#metadata">Metadata</a></li>
<li><a href="#systemd-socket-activation">Systemd socket activation</a></li>
<li><a href="#expose-buildkit-as-a-tcp-service">Expose BuildKit as a TCP service</a>
<ul dir="auto">
<li><a href="#load-balancing">Load balancing</a></li>
</ul>
</li>
<li><a href="#containerizing-buildkit">Containerizing BuildKit</a>
<ul dir="auto">
<li><a href="#podman">Podman</a></li>
<li><a href="#nerdctl">Nerdctl</a></li>
<li><a href="#kubernetes">Kubernetes</a></li>
<li><a href="#daemonless">Daemonless</a></li>
</ul>
</li>
<li><a href="#opentelemetry-support">OpenTelemetry support</a></li>
<li><a href="#running-buildkit-without-root-privileges">Running BuildKit without root privileges</a></li>
<li><a href="#building-multi-platform-images">Building multi-platform images</a>
<ul dir="auto">
<li><a href="#configuring-buildctl">Configuring <code class="notranslate">buildctl</code></a>
<ul dir="auto">
<li><a href="#color-output-controls">Color Output Controls</a></li>
<li><a href="#number-of-log-lines-for-active-steps-in-tty-mode">Number of log lines (for active steps in tty mode)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
</ul>

<h2 dir="auto">Used by</h2>
<p dir="auto">BuildKit is used by the following projects:</p>
<ul dir="auto">
<li><a href="https://github.com/moby/moby/pull/37151" data-hovercard-type="pull_request" data-hovercard-url="/moby/moby/pull/37151/hovercard">Moby &amp; Docker</a> (<code class="notranslate">DOCKER_BUILDKIT=1 docker build</code>)</li>
<li><a href="https://github.com/genuinetools/img">img</a></li>
<li><a href="https://github.com/openfaas/openfaas-cloud">OpenFaaS Cloud</a></li>
<li><a href="https://github.com/containerbuilding/cbi">container build interface</a></li>
<li><a href="https://github.com/tektoncd/catalog">Tekton Pipelines</a> (formerly <a href="https://github.com/knative/build-templates">Knative Build Templates</a>)</li>
<li><a href="https://github.com/distributed-containers-inc/sanic">the Sanic build tool</a></li>
<li><a href="https://github.com/stellarproject/vab">vab</a></li>
<li><a href="https://github.com/rancher/rio">Rio</a></li>
<li><a href="https://github.com/rancher/kim">kim</a></li>
<li><a href="https://github.com/alibaba/pouch">PouchContainer</a></li>
<li><a href="https://github.com/docker/buildx">Docker buildx</a></li>
<li><a href="https://okteto.com/" rel="nofollow">Okteto Cloud</a></li>
<li><a href="https://github.com/vladaionescu/earthly">Earthly earthfiles</a></li>
<li><a href="https://github.com/gitpod-io/gitpod">Gitpod</a></li>
<li><a href="https://dagger.io" rel="nofollow">Dagger</a></li>
<li><a href="https://github.com/tensorchord/envd/">envd</a></li>
<li><a href="https://depot.dev" rel="nofollow">Depot</a></li>
<li><a href="https://namespace.so" rel="nofollow">Namespace</a></li>
<li><a href="https://unikraft.org" rel="nofollow">Unikraft</a></li>
<li><a href="https://devzero.io" rel="nofollow">DevZero</a></li>
<li><a href="https://github.com/r2d4/dacc">dacc</a></li>
</ul>
<h2 dir="auto">Quick start</h2>
<p dir="auto">ℹ️ For Kubernetes deployments, see <a href="./examples/kubernetes"><code class="notranslate">examples/kubernetes</code></a>.</p>
<p dir="auto">BuildKit is composed of the <code class="notranslate">buildkitd</code> daemon and the <code class="notranslate">buildctl</code> client.<br>
While the <code class="notranslate">buildctl</code> client is available for Linux, macOS, and Windows, the <code class="notranslate">buildkitd</code> daemon is only available for Linux and *Windows currently.</p>
<p dir="auto">The latest binaries of BuildKit are available <a href="https://github.com/moby/buildkit/releases">here</a> for Linux, macOS, and Windows.</p>
<h3 dir="auto">Linux Setup</h3>
<p dir="auto">The <code class="notranslate">buildkitd</code> daemon requires the following components to be installed:</p>
<ul dir="auto">
<li><a href="https://github.com/opencontainers/runc">runc</a> or <a href="https://github.com/containers/crun">crun</a></li>
<li><a href="https://github.com/containerd/containerd">containerd</a> (if you want to use containerd worker)</li>
</ul>
<p dir="auto"><strong>Starting the <code class="notranslate">buildkitd</code> daemon:</strong><br>
You need to run <code class="notranslate">buildkitd</code> as the root user on the host.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ sudo buildkitd"><pre class="notranslate">$ sudo buildkitd</pre></div>
<p dir="auto">To run <code class="notranslate">buildkitd</code> as a non-root user, see <a href="docs/rootless.md"><code class="notranslate">docs/rootless.md</code></a>.</p>
<p dir="auto">The buildkitd daemon supports two worker backends: OCI (runc) and containerd.</p>
<p dir="auto">By default, the OCI (runc) worker is used. You can set <code class="notranslate">--oci-worker=false --containerd-worker=true</code> to use the containerd worker.</p>
<p dir="auto">We are open to adding more backends.</p>
<p dir="auto">To start the buildkitd daemon using systemd socket activation, you can install the buildkit systemd unit files.<br>
See <a href="#systemd-socket-activation">Systemd socket activation</a></p>
<p dir="auto">The buildkitd daemon listens gRPC API on <code class="notranslate">/run/buildkit/buildkitd.sock</code> by default, but you can also use TCP sockets.<br>
See <a href="#expose-buildkit-as-a-tcp-service">Expose BuildKit as a TCP service</a>.</p>
<h3 dir="auto">Windows Setup</h3>
<p dir="auto">See instructions and notes at <a href="./docs/windows.md"><code class="notranslate">docs/windows.md</code></a>.</p>
<h3 dir="auto">macOS Setup</h3>
<p dir="auto"><a href="https://formulae.brew.sh/formula/buildkit" rel="nofollow">Homebrew formula</a> (unofficial) is available for macOS.</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ brew install buildkit"><pre class="notranslate">$ <span class="pl-s1">brew install buildkit</span></pre></div>
<p dir="auto">The Homebrew formula does not contain the daemon (<code class="notranslate">buildkitd</code>).</p>
<p dir="auto">For example, <a href="https://lima-vm.io" rel="nofollow">Lima</a> can be used for launching the daemon inside a Linux VM.</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="brew install lima
limactl start template://buildkit
export BUILDKIT_HOST=&quot;unix://$HOME/.lima/buildkit/sock/buildkitd.sock&quot;"><pre class="notranslate"><span class="pl-c1">brew install lima</span>
<span class="pl-c1">limactl start template://buildkit</span>
<span class="pl-c1">export BUILDKIT_HOST="unix://$HOME/.lima/buildkit/sock/buildkitd.sock"</span></pre></div>
<h3 dir="auto">Build from source</h3>
<p dir="auto">To build BuildKit from source, see <a href="./.github/CONTRIBUTING.md"><code class="notranslate">.github/CONTRIBUTING.md</code></a>.</p>
<p dir="auto">For a <code class="notranslate">buildctl</code> reference, see <a href="./docs/reference/buildctl.md">this document</a>.</p>
<h3 dir="auto">Exploring LLB</h3>
<p dir="auto">BuildKit builds are based on a binary intermediate format called LLB that is used for defining the dependency graph for processes running part of your build. tl;dr: LLB is to Dockerfile what LLVM IR is to C.</p>
<ul dir="auto">
<li>Marshaled as Protobuf messages</li>
<li>Concurrently executable</li>
<li>Efficiently cacheable</li>
<li>Vendor-neutral (i.e. non-Dockerfile languages can be easily implemented)</li>
</ul>
<p dir="auto">See <a href="./solver/pb/ops.proto"><code class="notranslate">solver/pb/ops.proto</code></a> for the format definition, and see <a href="./examples/README.md"><code class="notranslate">./examples/README.md</code></a> for example LLB applications.</p>
<p dir="auto">Currently, the following high-level languages have been implemented for LLB:</p>
<ul dir="auto">
<li>Dockerfile (See <a href="#exploring-dockerfiles">Exploring Dockerfiles</a>)</li>
<li><a href="https://github.com/tonistiigi/buildkit-pack">Buildpacks</a></li>
<li><a href="https://matt-rickard.com/building-a-new-dockerfile-frontend/" rel="nofollow">Mockerfile</a></li>
<li><a href="https://github.com/po3rin/gockerfile">Gockerfile</a></li>
<li><a href="https://github.com/talos-systems/bldr/">bldr (Pkgfile)</a></li>
<li><a href="https://github.com/openllb/hlb">HLB</a></li>
<li><a href="https://github.com/earthly/earthly">Earthfile (Earthly)</a></li>
<li><a href="https://github.com/denzp/cargo-wharf">Cargo Wharf (Rust)</a></li>
<li><a href="https://github.com/reproducible-containers/buildkit-nix">Nix</a></li>
<li><a href="https://github.com/cmdjulian/mopy">mopy (Python)</a></li>
<li><a href="https://github.com/tensorchord/envd/">envd (starlark)</a></li>
<li><a href="https://gitlab.wikimedia.org/repos/releng/blubber" rel="nofollow">Blubber</a></li>
<li><a href="https://github.com/vito/bass">Bass</a></li>
<li><a href="https://github.com/unikraft/kraftkit/tree/staging/tools/dockerfile-llb-frontend">kraft.yaml (Unikraft)</a></li>
<li><a href="https://github.com/r2d4/llb">r2d4/llb (JSON Gateway)</a></li>
<li>(open a PR to add your own language)</li>
</ul>
<h3 dir="auto">Exploring Dockerfiles</h3>
<p dir="auto">Frontends are components that run inside BuildKit and convert any build definition to LLB. There is a special frontend called gateway (<code class="notranslate">gateway.v0</code>) that allows using any image as a frontend.</p>
<p dir="auto">During development, Dockerfile frontend (<code class="notranslate">dockerfile.v0</code>) is also part of the BuildKit repo. In the future, this will be moved out, and Dockerfiles can be built using an external image.</p>
<h4 dir="auto">Building a Dockerfile with <code class="notranslate">buildctl</code></h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build \
    --frontend=dockerfile.v0 \
    --local context=. \
    --local dockerfile=.
# or
buildctl build \
    --frontend=dockerfile.v0 \
    --local context=. \
    --local dockerfile=. \
    --opt target=foo \
    --opt build-arg:foo=bar"><pre class="notranslate">buildctl build \
    --frontend=dockerfile.v0 \
    --local context=. \
    --local dockerfile=.
<span class="pl-c"><span class="pl-c">#</span> or</span>
buildctl build \
    --frontend=dockerfile.v0 \
    --local context=. \
    --local dockerfile=. \
    --opt target=foo \
    --opt build-arg:foo=bar</pre></div>
<p dir="auto"><code class="notranslate">--local</code> exposes local source files from client to the builder. <code class="notranslate">context</code> and <code class="notranslate">dockerfile</code> are the names Dockerfile frontend looks for build context and Dockerfile location.</p>
<p dir="auto">If the Dockerfile has a different filename it can be specified with <code class="notranslate">--opt filename=./Dockerfile-alternative</code>.</p>
<h4 dir="auto">Building a Dockerfile using external frontend</h4>
<p dir="auto">External versions of the Dockerfile frontend are pushed to <a href="https://hub.docker.com/r/docker/dockerfile-upstream" rel="nofollow">https://hub.docker.com/r/docker/dockerfile-upstream</a> and <a href="https://hub.docker.com/r/docker/dockerfile" rel="nofollow">https://hub.docker.com/r/docker/dockerfile</a> and can be used with the gateway frontend. The source for the external frontend is currently located in <code class="notranslate">./frontend/dockerfile/cmd/dockerfile-frontend</code> but will move out of this repository in the future (<a href="https://github.com/moby/buildkit/issues/163" data-hovercard-type="issue" data-hovercard-url="/moby/buildkit/issues/163/hovercard">#163</a>). For automatic build from master branch of this repository <code class="notranslate">docker/dockerfile-upstream:master</code> or <code class="notranslate">docker/dockerfile-upstream:master-labs</code> image can be used.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build \
    --frontend gateway.v0 \
    --opt source=docker/dockerfile \
    --local context=. \
    --local dockerfile=.
buildctl build \
    --frontend gateway.v0 \
    --opt source=docker/dockerfile \
    --opt context=https://github.com/moby/moby.git \
    --opt build-arg:APT_MIRROR=cdn-fastly.deb.debian.org"><pre class="notranslate">buildctl build \
    --frontend gateway.v0 \
    --opt source=docker/dockerfile \
    --local context=. \
    --local dockerfile=.
buildctl build \
    --frontend gateway.v0 \
    --opt source=docker/dockerfile \
    --opt context=https://github.com/moby/moby.git \
    --opt build-arg:APT_MIRROR=cdn-fastly.deb.debian.org</pre></div>
<h3 dir="auto">Output</h3>
<p dir="auto">By default, the build result and intermediate cache will only remain internally in BuildKit. An output needs to be specified to retrieve the result.</p>
<h4 dir="auto">Image/Registry</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --output type=image,name=docker.io/username/image,push=true"><pre class="notranslate">buildctl build ... --output type=image,name=docker.io/username/image,push=true</pre></div>
<p dir="auto">To export the image to multiple registries:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --output type=image,\&quot;name=docker.io/username/image,docker.io/username2/image2\&quot;,push=true"><pre class="notranslate">buildctl build ... --output type=image,<span class="pl-cce">\"</span>name=docker.io/username/image,docker.io/username2/image2<span class="pl-cce">\"</span>,push=true</pre></div>
<p dir="auto">To export the cache embed with the image and pushing them to registry together, type <code class="notranslate">registry</code> is required to import the cache, you should specify <code class="notranslate">--export-cache type=inline</code> and <code class="notranslate">--import-cache type=registry,ref=...</code>. To export the cache to a local directly, you should specify <code class="notranslate">--export-cache type=local</code>.<br>
Details in <a href="#export-cache">Export cache</a>.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ...\
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=inline \
  --import-cache type=registry,ref=docker.io/username/image"><pre class="notranslate">buildctl build ...\
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=inline \
  --import-cache type=registry,ref=docker.io/username/image</pre></div>
<p dir="auto">Keys supported by image output:</p>
<ul dir="auto">
<li><code class="notranslate">name=&lt;value&gt;</code>: specify image name(s)</li>
<li><code class="notranslate">push=true</code>: push after creating the image</li>
<li><code class="notranslate">push-by-digest=true</code>: push unnamed image</li>
<li><code class="notranslate">registry.insecure=true</code>: push to insecure HTTP registry</li>
<li><code class="notranslate">oci-mediatypes=true</code>: use OCI mediatypes in configuration JSON instead of Docker's</li>
<li><code class="notranslate">oci-artifact=false</code>: use OCI artifact format for attestations</li>
<li><code class="notranslate">unpack=true</code>: unpack image after creation (for use with containerd)</li>
<li><code class="notranslate">dangling-name-prefix=&lt;value&gt;</code>: name image with <code class="notranslate">prefix@&lt;digest&gt;</code>, used for anonymous images</li>
<li><code class="notranslate">name-canonical=true</code>: add additional canonical name <code class="notranslate">name@&lt;digest&gt;</code></li>
<li><code class="notranslate">compression=&lt;uncompressed|gzip|estargz|zstd&gt;</code>: choose compression type for layers newly created and cached, gzip is default value. estargz should be used with <code class="notranslate">oci-mediatypes=true</code>.</li>
<li><code class="notranslate">compression-level=&lt;value&gt;</code>: compression level for gzip, estargz (0-9) and zstd (0-22)</li>
<li><code class="notranslate">rewrite-timestamp=true</code>: rewrite the file timestamps to the <code class="notranslate">SOURCE_DATE_EPOCH</code> value.<br>
See <a href="docs/build-repro.md"><code class="notranslate">docs/build-repro.md</code></a> for how to specify the <code class="notranslate">SOURCE_DATE_EPOCH</code> value.</li>
<li><code class="notranslate">force-compression=true</code>: forcefully apply <code class="notranslate">compression</code> option to all layers (including already existing layers)</li>
<li><code class="notranslate">store=true</code>: store the result images to the worker's (e.g. containerd) image store as well as ensures that the image has all blobs in the content store (default <code class="notranslate">true</code>). Ignored if the worker doesn't have image store (e.g. OCI worker).</li>
<li><code class="notranslate">annotation.&lt;key&gt;=&lt;value&gt;</code>: attach an annotation with the respective <code class="notranslate">key</code> and <code class="notranslate">value</code> to the built image
<ul dir="auto">
<li>Using the extended syntaxes, <code class="notranslate">annotation-&lt;type&gt;.&lt;key&gt;=&lt;value&gt;</code>, <code class="notranslate">annotation[&lt;platform&gt;].&lt;key&gt;=&lt;value&gt;</code> and both combined with <code class="notranslate">annotation-&lt;type&gt;[&lt;platform&gt;].&lt;key&gt;=&lt;value&gt;</code>, allows configuring exactly where to attach the annotation.</li>
<li><code class="notranslate">&lt;type&gt;</code> specifies what object to attach to, and can be any of <code class="notranslate">manifest</code> (the default), <code class="notranslate">manifest-descriptor</code>, <code class="notranslate">index</code> and <code class="notranslate">index-descriptor</code></li>
<li><code class="notranslate">&lt;platform&gt;</code> specifies which objects to attach to (by default, all), and is the same key passed into the <code class="notranslate">platform</code> opt, see <a href="docs/multi-platform.md"><code class="notranslate">docs/multi-platform.md</code></a>.</li>
<li>See <a href="docs/annotations.md"><code class="notranslate">docs/annotations.md</code></a> for more details.</li>
</ul>
</li>
</ul>
<p dir="auto">If credentials are required, <code class="notranslate">buildctl</code> will attempt to read Docker configuration file <code class="notranslate">$DOCKER_CONFIG/config.json</code>.<br>
<code class="notranslate">$DOCKER_CONFIG</code> defaults to <code class="notranslate">~/.docker</code>.</p>
<h4 dir="auto">Local directory</h4>
<p dir="auto">The local client will copy the files directly to the client. This is useful if BuildKit is being used for building something else than container images.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --output type=local,dest=path/to/output-dir"><pre class="notranslate">buildctl build ... --output type=local,dest=path/to/output-dir</pre></div>
<p dir="auto">To export specific files use multi-stage builds with a scratch stage and copy the needed files into that stage with <code class="notranslate">COPY --from</code>.</p>
<div class="highlight highlight-source-dockerfile notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="...
FROM scratch as testresult

COPY --from=builder /usr/src/app/testresult.xml .
..."><pre class="notranslate">...
<span class="pl-k">FROM</span> scratch as testresult

<span class="pl-k">COPY</span> --from=builder /usr/src/app/testresult.xml .
...</pre></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --opt target=testresult --output type=local,dest=path/to/output-dir"><pre class="notranslate">buildctl build ... --opt target=testresult --output type=local,dest=path/to/output-dir</pre></div>
<p dir="auto">With a <a href="docs/multi-platform.md">multi-platform build</a>, a subfolder matching<br>
each target platform will be created in the destination directory:</p>
<div class="highlight highlight-source-dockerfile notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="FROM busybox AS build
ARG TARGETOS
ARG TARGETARCH
RUN mkdir /out &amp;&amp; echo foo &gt; /out/hello-$TARGETOS-$TARGETARCH

FROM scratch
COPY --from=build /out /"><pre class="notranslate"><span class="pl-k">FROM</span> busybox AS build
<span class="pl-k">ARG</span> TARGETOS
<span class="pl-k">ARG</span> TARGETARCH
<span class="pl-k">RUN</span> mkdir /out &amp;&amp; echo foo &gt; /out/hello-$TARGETOS-$TARGETARCH

<span class="pl-k">FROM</span> scratch
<span class="pl-k">COPY</span> --from=build /out /</pre></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ buildctl build \
  --frontend dockerfile.v0 \
  --opt platform=linux/amd64,linux/arm64 \
  --output type=local,dest=./bin/release

$ tree ./bin
./bin/
└── release
    ├── linux_amd64
    │   └── hello-linux-amd64
    └── linux_arm64
        └── hello-linux-arm64"><pre class="notranslate">$ buildctl build \
  --frontend dockerfile.v0 \
  --opt platform=linux/amd64,linux/arm64 \
  --output type=local,dest=./bin/release

$ tree ./bin
./bin/
└── release
    ├── linux_amd64
    │   └── hello-linux-amd64
    └── linux_arm64
        └── hello-linux-arm64</pre></div>
<p dir="auto">You can set <code class="notranslate">platform-split=false</code> to merge files from all platforms together<br>
into same directory:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ buildctl build \
  --frontend dockerfile.v0 \
  --opt platform=linux/amd64,linux/arm64 \
  --output type=local,dest=./bin/release,platform-split=false

$ tree ./bin
./bin/
└── release
    ├── hello-linux-amd64
    └── hello-linux-arm64"><pre class="notranslate">$ buildctl build \
  --frontend dockerfile.v0 \
  --opt platform=linux/amd64,linux/arm64 \
  --output type=local,dest=./bin/release,platform-split=false

$ tree ./bin
./bin/
└── release
    ├── hello-linux-amd64
    └── hello-linux-arm64</pre></div>
<p dir="auto">Tar exporter is similar to local exporter but transfers the files through a tarball.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --output type=tar,dest=out.tar
buildctl build ... --output type=tar &gt; out.tar"><pre class="notranslate">buildctl build ... --output type=tar,dest=out.tar
buildctl build ... --output type=tar <span class="pl-k">&gt;</span> out.tar</pre></div>
<h4 dir="auto">Docker tarball</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# exported tarball is also compatible with OCI spec
buildctl build ... --output type=docker,name=myimage | docker load"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> exported tarball is also compatible with OCI spec</span>
buildctl build ... --output type=docker,name=myimage <span class="pl-k">|</span> docker load</pre></div>
<h4 dir="auto">OCI tarball</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --output type=oci,dest=path/to/output.tar
buildctl build ... --output type=oci &gt; output.tar"><pre class="notranslate">buildctl build ... --output type=oci,dest=path/to/output.tar
buildctl build ... --output type=oci <span class="pl-k">&gt;</span> output.tar</pre></div>
<h4 dir="auto">containerd image store</h4>
<p dir="auto">The containerd worker needs to be used</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --output type=image,name=docker.io/username/image
ctr --namespace=buildkit images ls"><pre class="notranslate">buildctl build ... --output type=image,name=docker.io/username/image
ctr --namespace=buildkit images ls</pre></div>
<p dir="auto">To change the containerd namespace, you need to change <code class="notranslate">worker.containerd.namespace</code> in <a href="./docs/buildkitd.toml.md"><code class="notranslate">/etc/buildkit/buildkitd.toml</code></a>.</p>
<h2 dir="auto">Cache</h2>
<p dir="auto">To show local build cache (<code class="notranslate">/var/lib/buildkit</code>):</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl du -v"><pre class="notranslate">buildctl du -v</pre></div>
<p dir="auto">To prune local build cache:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl prune"><pre class="notranslate">buildctl prune</pre></div>
<h3 dir="auto">Garbage collection</h3>
<p dir="auto">See <a href="./docs/buildkitd.toml.md"><code class="notranslate">./docs/buildkitd.toml.md</code></a>.</p>
<h3 dir="auto">Export cache</h3>
<p dir="auto">BuildKit supports the following cache exporters:</p>
<ul dir="auto">
<li><code class="notranslate">inline</code>: embed the cache into the image, and push them to the registry together</li>
<li><code class="notranslate">registry</code>: push the image and the cache separately</li>
<li><code class="notranslate">local</code>: export to a local directory</li>
<li><code class="notranslate">gha</code>: export to GitHub Actions cache</li>
</ul>
<p dir="auto">In most case you want to use the <code class="notranslate">inline</code> cache exporter.<br>
However, note that the <code class="notranslate">inline</code> cache exporter only supports <code class="notranslate">min</code> cache mode.<br>
To enable <code class="notranslate">max</code> cache mode, push the image and the cache separately by using <code class="notranslate">registry</code> cache exporter.</p>
<p dir="auto"><code class="notranslate">inline</code> and <code class="notranslate">registry</code> exporters both store the cache in the registry. For importing the cache, <code class="notranslate">type=registry</code> is sufficient for both, as specifying the cache format is not necessary.</p>
<h4 dir="auto">Inline (push image and cache together)</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... \
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=inline \
  --import-cache type=registry,ref=docker.io/username/image"><pre class="notranslate">buildctl build ... \
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=inline \
  --import-cache type=registry,ref=docker.io/username/image</pre></div>
<p dir="auto">Note that the inline cache is not imported unless <a href="#registry-push-image-and-cache-separately"><code class="notranslate">--import-cache type=registry,ref=...</code></a> is provided.</p>
<p dir="auto">Inline cache embeds cache metadata into the image config. The layers in the image will be left untouched compared to the image with no cache information.</p>
<p dir="auto">ℹ️ Docker-integrated BuildKit (<code class="notranslate">DOCKER_BUILDKIT=1 docker build</code>) and <code class="notranslate">docker buildx</code>requires<br>
<code class="notranslate">--build-arg BUILDKIT_INLINE_CACHE=1</code> to be specified to enable the <code class="notranslate">inline</code> cache exporter.<br>
However, the standalone <code class="notranslate">buildctl</code> does NOT require <code class="notranslate">--opt build-arg:BUILDKIT_INLINE_CACHE=1</code> and the build-arg is simply ignored.</p>
<h4 dir="auto">Registry (push image and cache separately)</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... \
  --output type=image,name=localhost:5000/myrepo:image,push=true \
  --export-cache type=registry,ref=localhost:5000/myrepo:buildcache \
  --import-cache type=registry,ref=localhost:5000/myrepo:buildcache"><pre class="notranslate">buildctl build ... \
  --output type=image,name=localhost:5000/myrepo:image,push=true \
  --export-cache type=registry,ref=localhost:5000/myrepo:buildcache \
  --import-cache type=registry,ref=localhost:5000/myrepo:buildcache</pre></div>
<p dir="auto"><code class="notranslate">--export-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=registry</code></li>
<li><code class="notranslate">mode=&lt;min|max&gt;</code>: specify cache layers to export (default: <code class="notranslate">min</code>)
<ul dir="auto">
<li><code class="notranslate">min</code>: only export layers for the resulting image</li>
<li><code class="notranslate">max</code>: export all the layers of all intermediate steps</li>
</ul>
</li>
<li><code class="notranslate">ref=&lt;ref&gt;</code>: specify repository reference to store cache, e.g. <code class="notranslate">docker.io/user/image:tag</code></li>
<li><code class="notranslate">image-manifest=&lt;true|false&gt;</code>: whether to export cache manifest as an OCI-compatible image manifest rather than a manifest list/index (default: <code class="notranslate">true</code> since BuildKit <code class="notranslate">v0.21</code>, must be used with <code class="notranslate">oci-mediatypes=true</code>)</li>
<li><code class="notranslate">oci-mediatypes=&lt;true|false&gt;</code>: whether to use OCI mediatypes in exported manifests (default: <code class="notranslate">true</code>, since BuildKit <code class="notranslate">v0.8</code>)</li>
<li><code class="notranslate">compression=&lt;uncompressed|gzip|estargz|zstd&gt;</code>: choose compression type for layers newly created and cached, gzip is default value. estargz and zstd should be used with <code class="notranslate">oci-mediatypes=true</code></li>
<li><code class="notranslate">compression-level=&lt;value&gt;</code>: choose compression level for gzip, estargz (0-9) and zstd (0-22)</li>
<li><code class="notranslate">force-compression=true</code>: forcibly apply <code class="notranslate">compression</code> option to all layers</li>
<li><code class="notranslate">ignore-error=&lt;false|true&gt;</code>: specify if error is ignored in case cache export fails (default: <code class="notranslate">false</code>)</li>
</ul>
<p dir="auto"><code class="notranslate">--import-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=registry</code></li>
<li><code class="notranslate">ref=&lt;ref&gt;</code>: specify repository reference to retrieve cache from, e.g. <code class="notranslate">docker.io/user/image:tag</code></li>
</ul>
<h4 dir="auto">Local directory</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --export-cache type=local,dest=path/to/output-dir
buildctl build ... --import-cache type=local,src=path/to/input-dir"><pre class="notranslate">buildctl build ... --export-cache type=local,dest=path/to/output-dir
buildctl build ... --import-cache type=local,src=path/to/input-dir</pre></div>
<p dir="auto">The directory layout conforms to OCI Image Spec v1.0.</p>
<p dir="auto"><code class="notranslate">--export-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=local</code></li>
<li><code class="notranslate">mode=&lt;min|max&gt;</code>: specify cache layers to export (default: <code class="notranslate">min</code>)
<ul dir="auto">
<li><code class="notranslate">min</code>: only export layers for the resulting image</li>
<li><code class="notranslate">max</code>: export all the layers of all intermediate steps</li>
</ul>
</li>
<li><code class="notranslate">dest=&lt;path&gt;</code>: destination directory for cache exporter</li>
<li><code class="notranslate">tag=&lt;tag&gt;</code>: specify custom tag of image to write to local index (default: <code class="notranslate">latest</code>)</li>
<li><code class="notranslate">image-manifest=&lt;true|false&gt;</code>: whether to export cache manifest as an OCI-compatible image manifest rather than a manifest list/index (default: <code class="notranslate">true</code> since BuildKit <code class="notranslate">v0.21</code>, must be used with <code class="notranslate">oci-mediatypes=true</code>)</li>
<li><code class="notranslate">oci-mediatypes=&lt;true|false&gt;</code>: whether to use OCI mediatypes in exported manifests (default <code class="notranslate">true</code>, since BuildKit <code class="notranslate">v0.8</code>)</li>
<li><code class="notranslate">compression=&lt;uncompressed|gzip|estargz|zstd&gt;</code>: choose compression type for layers newly created and cached, gzip is default value. estargz and zstd should be used with <code class="notranslate">oci-mediatypes=true</code>.</li>
<li><code class="notranslate">compression-level=&lt;value&gt;</code>: compression level for gzip, estargz (0-9) and zstd (0-22)</li>
<li><code class="notranslate">force-compression=true</code>: forcibly apply <code class="notranslate">compression</code> option to all layers</li>
<li><code class="notranslate">ignore-error=&lt;false|true&gt;</code>: specify if error is ignored in case cache export fails (default: <code class="notranslate">false</code>)</li>
</ul>
<p dir="auto"><code class="notranslate">--import-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=local</code></li>
<li><code class="notranslate">src=&lt;path&gt;</code>: source directory for cache importer</li>
<li><code class="notranslate">tag=&lt;tag&gt;</code>: specify custom tag of image to read from local index (default: <code class="notranslate">latest</code>)</li>
<li><code class="notranslate">digest=sha256:&lt;sha256digest&gt;</code>: specify explicit digest of the manifest list to import</li>
</ul>
<h4 dir="auto">GitHub Actions cache (experimental)</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... \
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=gha \
  --import-cache type=gha"><pre class="notranslate">buildctl build ... \
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=gha \
  --import-cache type=gha</pre></div>
<p dir="auto">GitHub Actions cache saves both cache metadata and layers to GitHub's Cache service. This cache currently has a <a href="https://docs.github.com/en/actions/advanced-guides/caching-dependencies-to-speed-up-workflows#usage-limits-and-eviction-policy">size limit of 10GB</a> that is shared across different caches in the repo. If you exceed this limit, GitHub will save your cache but will begin evicting caches until the total size is less than 10 GB. Recycling caches too often can result in slower runtimes overall.</p>
<p dir="auto">Similarly to using <a href="https://github.com/actions/cache">actions/cache</a>, caches are <a href="https://docs.github.com/en/actions/advanced-guides/caching-dependencies-to-speed-up-workflows#restrictions-for-accessing-a-cache">scoped by branch</a>, with the default and target branches being available to every branch.</p>
<p dir="auto">Following attributes are required to authenticate against the <a href="https://github.com/tonistiigi/go-actions-cache/blob/master/api.md#authentication">GitHub Actions Cache service API</a>:</p>
<ul dir="auto">
<li><code class="notranslate">url</code>: Cache server URL (default <code class="notranslate">$ACTIONS_CACHE_URL</code> or fallback to <code class="notranslate">$ACTIONS_RESULTS_URL</code>)</li>
<li><code class="notranslate">url_v2</code>: Cache v2 server URL if <code class="notranslate">$ACTIONS_CACHE_SERVICE_V2</code> set on the runner (default <code class="notranslate">$ACTIONS_RESULTS_URL</code>)</li>
<li><code class="notranslate">token</code>: Access token (default <code class="notranslate">$ACTIONS_RUNTIME_TOKEN</code>)</li>
</ul>
<p dir="auto">ℹ️ This type of cache can be used with <a href="https://github.com/docker/build-push-action">Docker Build Push Action</a><br>
where <code class="notranslate">url</code> and <code class="notranslate">token</code> will be automatically set. To use this backend in an inline <code class="notranslate">run</code> step, you have to include <a href="https://github.com/crazy-max/ghaction-github-runtime">crazy-max/ghaction-github-runtime</a><br>
in your workflow to expose the runtime.</p>
<p dir="auto"><code class="notranslate">--export-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=gha</code></li>
<li><code class="notranslate">mode=&lt;min|max&gt;</code>: specify cache layers to export (default: <code class="notranslate">min</code>)
<ul dir="auto">
<li><code class="notranslate">min</code>: only export layers for the resulting image</li>
<li><code class="notranslate">max</code>: export all the layers of all intermediate steps</li>
</ul>
</li>
<li><code class="notranslate">scope=&lt;scope&gt;</code>: which scope cache object belongs to (default <code class="notranslate">buildkit</code>)</li>
<li><code class="notranslate">ignore-error=&lt;false|true&gt;</code>: specify if error is ignored in case cache export fails (default: <code class="notranslate">false</code>)</li>
<li><code class="notranslate">timeout=&lt;duration&gt;</code>: sets the timeout duration for cache export (default: <code class="notranslate">10m</code>)</li>
</ul>
<p dir="auto"><code class="notranslate">--import-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=gha</code></li>
<li><code class="notranslate">scope=&lt;scope&gt;</code>: which scope cache object belongs to (default <code class="notranslate">buildkit</code>)</li>
<li><code class="notranslate">timeout=&lt;duration&gt;</code>: sets the timeout duration for cache import (default: <code class="notranslate">10m</code>)</li>
</ul>
<h4 dir="auto">S3 cache (experimental)</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... \
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=s3,region=eu-west-1,bucket=my_bucket,name=my_image \
  --import-cache type=s3,region=eu-west-1,bucket=my_bucket,name=my_image"><pre class="notranslate">buildctl build ... \
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=s3,region=eu-west-1,bucket=my_bucket,name=my_image \
  --import-cache type=s3,region=eu-west-1,bucket=my_bucket,name=my_image</pre></div>
<p dir="auto">The following attributes are required:</p>
<ul dir="auto">
<li><code class="notranslate">bucket</code>: AWS S3 bucket (default: <code class="notranslate">$AWS_BUCKET</code>)</li>
<li><code class="notranslate">region</code>: AWS region (default: <code class="notranslate">$AWS_REGION</code>)</li>
</ul>
<p dir="auto">Storage locations:</p>
<ul dir="auto">
<li>blobs: <code class="notranslate">s3://&lt;bucket&gt;/&lt;prefix&gt;&lt;blobs_prefix&gt;/&lt;sha256&gt;</code>, default: <code class="notranslate">s3://&lt;bucket&gt;/blobs/&lt;sha256&gt;</code></li>
<li>manifests: <code class="notranslate">s3://&lt;bucket&gt;/&lt;prefix&gt;&lt;manifests_prefix&gt;/&lt;name&gt;</code>, default: <code class="notranslate">s3://&lt;bucket&gt;/manifests/&lt;name&gt;</code></li>
</ul>
<p dir="auto">S3 configuration:</p>
<ul dir="auto">
<li><code class="notranslate">blobs_prefix</code>: global prefix to store / read blobs on s3 (default: <code class="notranslate">blobs/</code>)</li>
<li><code class="notranslate">manifests_prefix</code>: global prefix to store / read manifests on s3 (default: <code class="notranslate">manifests/</code>)</li>
<li><code class="notranslate">endpoint_url</code>: specify a specific S3 endpoint (default: empty)</li>
<li><code class="notranslate">use_path_style</code>: if set to <code class="notranslate">true</code>, put the bucket name in the URL instead of in the hostname (default: <code class="notranslate">false</code>)</li>
</ul>
<p dir="auto">AWS Authentication:</p>
<p dir="auto">BuildKit relies on the [AWS Go SDK](<a href="https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html%5D(https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/config#EnvConfig)" rel="nofollow">https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html](https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/config#EnvConfig)</a>. This means that all standard authentication methods through environment variables or config files are supported. This is especially true for AWS EC2 IAM Profile and AWS Web Identity Token (IAM roles in Kubernetes).</p>
<p dir="auto">Beware, these configurations must be available at buildkit daemon level, not at client level.</p>
<ul dir="auto">
<li>The following attributes can be used to forward static credentials from a buildkit client to the daemon (buildx for example).
<ul dir="auto">
<li><code class="notranslate">access_key_id</code>: Access Key ID</li>
<li><code class="notranslate">secret_access_key</code>: Secret Access Key</li>
<li><code class="notranslate">session_token</code>: Session Token</li>
</ul>
</li>
</ul>
<p dir="auto"><code class="notranslate">--export-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=s3</code></li>
<li><code class="notranslate">mode=&lt;min|max&gt;</code>: specify cache layers to export (default: <code class="notranslate">min</code>)
<ul dir="auto">
<li><code class="notranslate">min</code>: only export layers for the resulting image</li>
<li><code class="notranslate">max</code>: export all the layers of all intermediate steps</li>
</ul>
</li>
<li><code class="notranslate">prefix=&lt;prefix&gt;</code>: set global prefix to store / read files on s3 (default: empty)</li>
<li><code class="notranslate">name=&lt;manifest&gt;</code>: specify name of the manifest to use (default <code class="notranslate">buildkit</code>)
<ul dir="auto">
<li>Multiple manifest names can be specified at the same time, separated by <code class="notranslate">;</code>. The standard use case is to use the git sha1 as name, and the branch name as duplicate, and load both with 2 <code class="notranslate">import-cache</code> commands.</li>
</ul>
</li>
<li><code class="notranslate">ignore-error=&lt;false|true&gt;</code>: specify if error is ignored in case cache export fails (default: <code class="notranslate">false</code>)</li>
<li><code class="notranslate">touch_refresh=24h</code>: Instead of being uploaded again when not changed, blobs files will be "touched" on s3 every <code class="notranslate">touch_refresh</code>, default is 24h. Due to this, an expiration policy can be set on the S3 bucket to cleanup useless files automatically. Manifests files are systematically rewritten, there is no need to touch them.</li>
<li><code class="notranslate">upload_parallelism=4</code>: This parameter changes the number of layers uploaded to s3 in parallel. Each individual layer is uploaded with 5 threads, using the Upload manager provided by the AWS SDK.</li>
</ul>
<p dir="auto"><code class="notranslate">--import-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=s3</code></li>
<li><code class="notranslate">prefix=&lt;prefix&gt;</code>: set global prefix to store / read files on s3 (default: empty)</li>
<li><code class="notranslate">blobs_prefix=&lt;prefix&gt;</code>: set global prefix to store / read blobs on s3 (default: <code class="notranslate">blobs/</code>)</li>
<li><code class="notranslate">manifests_prefix=&lt;prefix&gt;</code>: set global prefix to store / read manifests on s3 (default: <code class="notranslate">manifests/</code>)</li>
<li><code class="notranslate">name=&lt;manifest&gt;</code>: name of the manifest to use (default <code class="notranslate">buildkit</code>)</li>
</ul>
<h4 dir="auto">Azure Blob Storage cache (experimental)</h4>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... \
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=azblob,account_url=https://myaccount.blob.core.windows.net,name=my_image \
  --import-cache type=azblob,account_url=https://myaccount.blob.core.windows.net,name=my_image"><pre class="notranslate">buildctl build ... \
  --output type=image,name=docker.io/username/image,push=true \
  --export-cache type=azblob,account_url=https://myaccount.blob.core.windows.net,name=my_image \
  --import-cache type=azblob,account_url=https://myaccount.blob.core.windows.net,name=my_image</pre></div>
<p dir="auto">The following attributes are required:</p>
<ul dir="auto">
<li><code class="notranslate">account_url</code>: The Azure Blob Storage account URL (default: <code class="notranslate">$BUILDKIT_AZURE_STORAGE_ACCOUNT_URL</code>)</li>
</ul>
<p dir="auto">Storage locations:</p>
<ul dir="auto">
<li>blobs: <code class="notranslate">&lt;account_url&gt;/&lt;container&gt;/&lt;prefix&gt;&lt;blobs_prefix&gt;/&lt;sha256&gt;</code>, default: <code class="notranslate">&lt;account_url&gt;/&lt;container&gt;/blobs/&lt;sha256&gt;</code></li>
<li>manifests: <code class="notranslate">&lt;account_url&gt;/&lt;container&gt;/&lt;prefix&gt;&lt;manifests_prefix&gt;/&lt;name&gt;</code>, default: <code class="notranslate">&lt;account_url&gt;/&lt;container&gt;/manifests/&lt;name&gt;</code></li>
</ul>
<p dir="auto">Azure Blob Storage configuration:</p>
<ul dir="auto">
<li><code class="notranslate">container</code>: The Azure Blob Storage container name (default: <code class="notranslate">buildkit-cache</code> or <code class="notranslate">$BUILDKIT_AZURE_STORAGE_CONTAINER</code> if set)</li>
<li><code class="notranslate">blobs_prefix</code>: Global prefix to store / read blobs on the Azure Blob Storage container (<code class="notranslate">&lt;container&gt;</code>) (default: <code class="notranslate">blobs/</code>)</li>
<li><code class="notranslate">manifests_prefix</code>: Global prefix to store / read blobs on the Azure Blob Storage container (<code class="notranslate">&lt;container&gt;</code>) (default: <code class="notranslate">manifests/</code>)</li>
</ul>
<p dir="auto">Azure Blob Storage authentication:</p>
<p dir="auto">There are 2 options supported for Azure Blob Storage authentication:</p>
<ul dir="auto">
<li>Any system using environment variables supported by the <a href="https://docs.microsoft.com/en-us/azure/developer/go/azure-sdk-authentication" rel="nofollow">Azure SDK for Go</a>. The configuration must be available for the buildkit daemon, not for the client.</li>
<li>Secret Access Key, using the <code class="notranslate">secret_access_key</code> attribute to specify the primary or secondary account key for your Azure Blob Storage account. <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-keys-manage" rel="nofollow">Azure Blob Storage account keys</a></li>
</ul>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">Account name can also be specified with <code class="notranslate">account_name</code> attribute (or <code class="notranslate">$BUILDKIT_AZURE_STORAGE_ACCOUNT_NAME</code>)<br>
if it is not part of the account URL host.</p>
</div>
<p dir="auto"><code class="notranslate">--export-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=azblob</code></li>
<li><code class="notranslate">mode=&lt;min|max&gt;</code>: specify cache layers to export (default: <code class="notranslate">min</code>)
<ul dir="auto">
<li><code class="notranslate">min</code>: only export layers for the resulting image</li>
<li><code class="notranslate">max</code>: export all the layers of all intermediate steps</li>
</ul>
</li>
<li><code class="notranslate">prefix=&lt;prefix&gt;</code>: set global prefix to store / read files on the Azure Blob Storage container (<code class="notranslate">&lt;container&gt;</code>) (default: empty)</li>
<li><code class="notranslate">name=&lt;manifest&gt;</code>: specify name of the manifest to use (default: <code class="notranslate">buildkit</code>)
<ul dir="auto">
<li>Multiple manifest names can be specified at the same time, separated by <code class="notranslate">;</code>. The standard use case is to use the git sha1 as name, and the branch name as duplicate, and load both with 2 <code class="notranslate">import-cache</code> commands.</li>
</ul>
</li>
<li><code class="notranslate">ignore-error=&lt;false|true&gt;</code>: specify if error is ignored in case cache export fails (default: <code class="notranslate">false</code>)</li>
</ul>
<p dir="auto"><code class="notranslate">--import-cache</code> options:</p>
<ul dir="auto">
<li><code class="notranslate">type=azblob</code></li>
<li><code class="notranslate">prefix=&lt;prefix&gt;</code>: set global prefix to store / read files on the Azure Blob Storage container (<code class="notranslate">&lt;container&gt;</code>) (default: empty)</li>
<li><code class="notranslate">blobs_prefix=&lt;prefix&gt;</code>: set global prefix to store / read blobs on the Azure Blob Storage container (<code class="notranslate">&lt;container&gt;</code>) (default: <code class="notranslate">blobs/</code>)</li>
<li><code class="notranslate">manifests_prefix=&lt;prefix&gt;</code>: set global prefix to store / read manifests on the Azure Blob Storage container (<code class="notranslate">&lt;container&gt;</code>) (default: <code class="notranslate">manifests/</code>)</li>
<li><code class="notranslate">name=&lt;manifest&gt;</code>: name of the manifest to use (default: <code class="notranslate">buildkit</code>)</li>
</ul>
<h3 dir="auto">Consistent hashing</h3>
<p dir="auto">If you have multiple BuildKit daemon instances, but you don't want to use registry for sharing cache across the cluster,<br>
consider client-side load balancing using consistent hashing.</p>
<p dir="auto">See <a href="./examples/kubernetes/consistenthash"><code class="notranslate">./examples/kubernetes/consistenthash</code></a>.</p>
<h2 dir="auto">Metadata</h2>
<p dir="auto">To output build metadata such as the image digest, pass the <code class="notranslate">--metadata-file</code> flag.<br>
The metadata will be written as a JSON object to the specified file.<br>
The directory of the specified file must already exist and be writable.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl build ... --metadata-file metadata.json"><pre class="notranslate">buildctl build ... --metadata-file metadata.json</pre></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="jq '.' metadata.json"><pre class="notranslate">jq <span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span> metadata.json</pre></div>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="{
  &quot;containerimage.config.digest&quot;: &quot;sha256:2937f66a9722f7f4a2df583de2f8cb97fc9196059a410e7f00072fc918930e66&quot;,
  &quot;containerimage.descriptor&quot;: {
    &quot;annotations&quot;: {
      &quot;config.digest&quot;: &quot;sha256:2937f66a9722f7f4a2df583de2f8cb97fc9196059a410e7f00072fc918930e66&quot;,
      &quot;org.opencontainers.image.created&quot;: &quot;2022-02-08T21:28:03Z&quot;
    },
    &quot;digest&quot;: &quot;sha256:19ffeab6f8bc9293ac2c3fdf94ebe28396254c993aea0b5a542cfb02e0883fa3&quot;,
    &quot;mediaType&quot;: &quot;application/vnd.oci.image.manifest.v1+json&quot;,
    &quot;size&quot;: 506
  },
  &quot;containerimage.digest&quot;: &quot;sha256:19ffeab6f8bc9293ac2c3fdf94ebe28396254c993aea0b5a542cfb02e0883fa3&quot;
}"><pre class="notranslate">{
  <span class="pl-ent">"containerimage.config.digest"</span>: <span class="pl-s"><span class="pl-pds">"</span>sha256:2937f66a9722f7f4a2df583de2f8cb97fc9196059a410e7f00072fc918930e66<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"containerimage.descriptor"</span>: {
    <span class="pl-ent">"annotations"</span>: {
      <span class="pl-ent">"config.digest"</span>: <span class="pl-s"><span class="pl-pds">"</span>sha256:2937f66a9722f7f4a2df583de2f8cb97fc9196059a410e7f00072fc918930e66<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"org.opencontainers.image.created"</span>: <span class="pl-s"><span class="pl-pds">"</span>2022-02-08T21:28:03Z<span class="pl-pds">"</span></span>
    },
    <span class="pl-ent">"digest"</span>: <span class="pl-s"><span class="pl-pds">"</span>sha256:19ffeab6f8bc9293ac2c3fdf94ebe28396254c993aea0b5a542cfb02e0883fa3<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"mediaType"</span>: <span class="pl-s"><span class="pl-pds">"</span>application/vnd.oci.image.manifest.v1+json<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"size"</span>: <span class="pl-c1">506</span>
  },
  <span class="pl-ent">"containerimage.digest"</span>: <span class="pl-s"><span class="pl-pds">"</span>sha256:19ffeab6f8bc9293ac2c3fdf94ebe28396254c993aea0b5a542cfb02e0883fa3<span class="pl-pds">"</span></span>
}</pre></div>
<h2 dir="auto">Systemd socket activation</h2>
<p dir="auto">On Systemd based systems, you can communicate with the daemon via <a href="http://0pointer.de/blog/projects/socket-activation.html" rel="nofollow">Systemd socket activation</a>, use <code class="notranslate">buildkitd --addr fd://</code>.<br>
You can find examples of using Systemd socket activation with BuildKit and Systemd in <a href="./examples/systemd"><code class="notranslate">./examples/systemd</code></a>.</p>
<h2 dir="auto">Expose BuildKit as a TCP service</h2>
<p dir="auto">The <code class="notranslate">buildkitd</code> daemon can listen the gRPC API on a TCP socket.</p>
<p dir="auto">It is highly recommended to create TLS certificates for both the daemon and the client (mTLS).<br>
Enabling TCP without mTLS is dangerous because the executor containers (aka Dockerfile <code class="notranslate">RUN</code> containers) can call BuildKit API as well.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildkitd \
  --addr tcp://0.0.0.0:1234 \
  --tlscacert /path/to/ca.pem \
  --tlscert /path/to/cert.pem \
  --tlskey /path/to/key.pem"><pre class="notranslate">buildkitd \
  --addr tcp://0.0.0.0:1234 \
  --tlscacert /path/to/ca.pem \
  --tlscert /path/to/cert.pem \
  --tlskey /path/to/key.pem</pre></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="buildctl \
  --addr tcp://example.com:1234 \
  --tlscacert /path/to/ca.pem \
  --tlscert /path/to/clientcert.pem \
  --tlskey /path/to/clientkey.pem \
  build ..."><pre class="notranslate">buildctl \
  --addr tcp://example.com:1234 \
  --tlscacert /path/to/ca.pem \
  --tlscert /path/to/clientcert.pem \
  --tlskey /path/to/clientkey.pem \
  build ...</pre></div>
<h3 dir="auto">Load balancing</h3>
<p dir="auto"><code class="notranslate">buildctl build</code> can be called against randomly load balanced <code class="notranslate">buildkitd</code> daemons.</p>
<p dir="auto">See also <a href="#consistent-hashing">Consistent hashing</a> for client-side load balancing.</p>
<h2 dir="auto">Containerizing BuildKit</h2>
<p dir="auto">BuildKit can also be used by running the <code class="notranslate">buildkitd</code> daemon inside a Docker container and accessing it remotely.</p>
<p dir="auto">We provide the container images as <a href="https://hub.docker.com/r/moby/buildkit/tags/" rel="nofollow"><code class="notranslate">moby/buildkit</code></a>:</p>
<ul dir="auto">
<li><code class="notranslate">moby/buildkit:latest</code>: built from the latest regular <a href="https://github.com/moby/buildkit/releases">release</a></li>
<li><code class="notranslate">moby/buildkit:rootless</code>: same as <code class="notranslate">latest</code> but runs as an unprivileged user, see <a href="docs/rootless.md"><code class="notranslate">docs/rootless.md</code></a></li>
<li><code class="notranslate">moby/buildkit:master</code>: built from the master branch</li>
<li><code class="notranslate">moby/buildkit:master-rootless</code>: same as master but runs as an unprivileged user, see <a href="docs/rootless.md"><code class="notranslate">docs/rootless.md</code></a></li>
</ul>
<p dir="auto">To run daemon in a container:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="docker run -d --name buildkitd --privileged moby/buildkit:latest
export BUILDKIT_HOST=docker-container://buildkitd
buildctl build --help"><pre class="notranslate">docker run -d --name buildkitd --privileged moby/buildkit:latest
<span class="pl-k">export</span> BUILDKIT_HOST=docker-container://buildkitd
buildctl build --help</pre></div>
<h3 dir="auto">Podman</h3>
<p dir="auto">To connect to a BuildKit daemon running in a Podman container, use <code class="notranslate">podman-container://</code> instead of <code class="notranslate">docker-container://</code> .</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="podman run -d --name buildkitd --privileged moby/buildkit:latest
buildctl --addr=podman-container://buildkitd build --frontend dockerfile.v0 --local context=. --local dockerfile=. --output type=oci | podman load foo"><pre class="notranslate">podman run -d --name buildkitd --privileged moby/buildkit:latest
buildctl --addr=podman-container://buildkitd build --frontend dockerfile.v0 --local context=. --local dockerfile=. --output type=oci <span class="pl-k">|</span> podman load foo</pre></div>
<p dir="auto"><code class="notranslate">sudo</code> is not required.</p>
<h3 dir="auto">Nerdctl</h3>
<p dir="auto">To connect to a BuildKit daemon running in a Nerdctl container, use <code class="notranslate">nerdctl-container://</code> instead of <code class="notranslate">docker-container://</code>.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="nerdctl run -d --name buildkitd --privileged moby/buildkit:latest
buildctl --addr=nerdctl-container://buildkitd build --frontend dockerfile.v0 --local context=. --local dockerfile=. --output type=oci | nerdctl load"><pre class="notranslate">nerdctl run -d --name buildkitd --privileged moby/buildkit:latest
buildctl --addr=nerdctl-container://buildkitd build --frontend dockerfile.v0 --local context=. --local dockerfile=. --output type=oci <span class="pl-k">|</span> nerdctl load</pre></div>
<p dir="auto"><code class="notranslate">sudo</code> is not required.</p>
<h3 dir="auto">Kubernetes</h3>
<p dir="auto">For Kubernetes deployments, see <a href="./examples/kubernetes"><code class="notranslate">examples/kubernetes</code></a>.</p>
<h3 dir="auto">Daemonless</h3>
<p dir="auto">To run the client and an ephemeral daemon in a single container ("daemonless mode"):</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="docker run \
    -it \
    --rm \
    --privileged \
    -v /path/to/dir:/tmp/work \
    --entrypoint buildctl-daemonless.sh \
    moby/buildkit:master \
        build \
        --frontend dockerfile.v0 \
        --local context=/tmp/work \
        --local dockerfile=/tmp/work"><pre class="notranslate">docker run \
    -it \
    --rm \
    --privileged \
    -v /path/to/dir:/tmp/work \
    --entrypoint buildctl-daemonless.sh \
    moby/buildkit:master \
        build \
        --frontend dockerfile.v0 \
        --local context=/tmp/work \
        --local dockerfile=/tmp/work</pre></div>
<p dir="auto">or</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="docker run \
    -it \
    --rm \
    --security-opt seccomp=unconfined \
    --security-opt apparmor=unconfined \
    -e BUILDKITD_FLAGS=--oci-worker-no-process-sandbox \
    -v /path/to/dir:/tmp/work \
    --entrypoint buildctl-daemonless.sh \
    moby/buildkit:master-rootless \
        build \
        --frontend \
        dockerfile.v0 \
        --local context=/tmp/work \
        --local dockerfile=/tmp/work"><pre class="notranslate">docker run \
    -it \
    --rm \
    --security-opt seccomp=unconfined \
    --security-opt apparmor=unconfined \
    -e BUILDKITD_FLAGS=--oci-worker-no-process-sandbox \
    -v /path/to/dir:/tmp/work \
    --entrypoint buildctl-daemonless.sh \
    moby/buildkit:master-rootless \
        build \
        --frontend \
        dockerfile.v0 \
        --local context=/tmp/work \
        --local dockerfile=/tmp/work</pre></div>
<h2 dir="auto">OpenTelemetry support</h2>
<p dir="auto">BuildKit supports <a href="https://opentelemetry.io/" rel="nofollow">OpenTelemetry</a> for buildkitd gRPC<br>
API and buildctl commands. To capture the trace to<br>
<a href="https://github.com/jaegertracing/jaeger">Jaeger</a>, set <code class="notranslate">JAEGER_TRACE</code><br>
environment variable to the collection address.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="docker run -d -p6831:6831/udp -p16686:16686 jaegertracing/all-in-one:latest
export JAEGER_TRACE=0.0.0.0:6831
# restart buildkitd and buildctl so they know JAEGER_TRACE
# any buildctl command should be traced to http://127.0.0.1:16686/"><pre class="notranslate">docker run -d -p6831:6831/udp -p16686:16686 jaegertracing/all-in-one:latest
<span class="pl-k">export</span> JAEGER_TRACE=0.0.0.0:6831
<span class="pl-c"><span class="pl-c">#</span> restart buildkitd and buildctl so they know JAEGER_TRACE</span>
<span class="pl-c"><span class="pl-c">#</span> any buildctl command should be traced to http://127.0.0.1:16686/</span></pre></div>
<blockquote>
<p dir="auto">On Windows, if you are running Jaeger outside of a container, <a href="https://www.jaegertracing.io/docs/1.57/getting-started/#all-in-one" rel="nofollow"><code class="notranslate">jaeger-all-in-one.exe</code></a>,<br>
set the environment variable <code class="notranslate">setx -m JAEGER_TRACE "0.0.0.0:6831"</code>,<br>
restart <code class="notranslate">buildkitd</code> in a new terminal and the traces will be collected automatically.</p>
</blockquote>
<h2 dir="auto">Running BuildKit without root privileges</h2>
<p dir="auto">Please refer to <a href="docs/rootless.md"><code class="notranslate">docs/rootless.md</code></a>.</p>
<h2 dir="auto">Building multi-platform images</h2>
<p dir="auto">Please refer to <a href="docs/multi-platform.md"><code class="notranslate">docs/multi-platform.md</code></a>.</p>
<h3 dir="auto">Configuring <code class="notranslate">buildctl</code></h3>
<h4 dir="auto">Color Output Controls</h4>
<p dir="auto"><code class="notranslate">buildctl</code> has support for modifying the colors that are used to output information to the terminal. You can set the environment variable <code class="notranslate">BUILDKIT_COLORS</code> to something like <code class="notranslate">run=green:warning=yellow:error=red:cancel=255,165,0</code> to set the colors that you would like to use. Setting <code class="notranslate">NO_COLOR</code> to anything will disable any colorized output as recommended by <a href="https://no-color.org/" rel="nofollow">no-color.org</a>.</p>
<p dir="auto">Parsing errors will be reported but ignored. This will result in default color values being used where needed.</p>
<ul dir="auto">
<li><a href="https://github.com/moby/buildkit/blob/master/util/progress/progressui/colors.go">The list of pre-defined colors</a>.</li>
</ul>
<h4 dir="auto">Number of log lines (for active steps in tty mode)</h4>
<p dir="auto">You can change how many log lines are visible for active steps in tty mode by setting <code class="notranslate">BUILDKIT_TTY_LOG_LINES</code> to a number (default: 6).</p>
<h2 dir="auto">Contributing</h2>
<p dir="auto">Want to contribute to BuildKit? Awesome! You can find information about contributing to this project in the <a href="/.github/CONTRIBUTING.md">CONTRIBUTING.md</a></p></div></div></div><div class="gg-issues-prev-next"><a class="prev" href="/issues/57"><span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon-action" font-size="20" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M2 3h17a2 2 0 0 1 2 2v4h-2V5H2v14h17v-4h2v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m15 12v-2h7v-2h-7V9l-4 3l4 3M4 13h7v-2H4v2m0-4h7V7H4v2m0 8h4v-2H4v2Z"/></svg>aristocratos/btop: 系统资源监视器显示处理器、内存、磁盘、网络和进程的使用情况和统计​​信息</span></a><a class="next" href="/issues/59"><span>TeaWeb/build: TeaWeb 是一款集静态资源、缓存、代理、统计、日志、安全、监控于一体的可视化智能 WebServer。<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon-action" font-size="20" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M22 3H5a2 2 0 0 0-2 2v4h2V5h17v14H5v-4H3v4a2 2 0 0 0 2 2h17a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2M7 15v-2H0v-2h7V9l4 3l-4 3m13-2h-7v-2h7v2m0-4h-7V7h7v2m-3 8h-4v-2h4v2Z"/></svg></span></a></div><div class="answer-content"><div class="comments"></div></div></div></div></main><footer><div class="license"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img style="width:60px;height:21px" src="/static/license-83d755bd405fbe51c87dc088baf26299.svg" alt="License"/></a></div><div class="copyright"><span>Copyright ©<!-- --> <!-- -->2025<!-- -->-present</span><a class="owner" href="https://github.com/awesome-ops/awesome-ops.github.io" target="_blank">awesome-ops/awesome-ops.github.io</a>.</div><span class="powered">Powered by<a class="owner" title="GG (Gatsby + GitHub) - A gatsby website builder based on github discussions" href="https://github.com/lencx/gg" target="_blank">gg</a></span></footer></div><div id="gg-backtop" class="hide"><svg viewBox="0 0 98 125" xmlns="http://www.w3.org/2000/svg"><path d="m.41627505 120.505813c.36557376-2.799314 38.38567845-112.09375627 40.40633855-116.52273479 2.0206601-4.42897853 7.0443939-6.06190829 10.0049342.20172081 1.9736935 4.17575274 17.3630227 42.22464148 46.1679874 114.14666598.3068629 1.030234.4237748 1.755017.3507358 2.174348-.4483666 2.574161-2.3292736 3.429521-4.6125739 2.516093-15.0683018-6.028033-36.2681037-23.1692513-43.8663627-23.1692513-7.5982589 0-27.0568176 12.9171643-43.18383202 23.1692513-.96511235.613531-1.91473089 1.069619-2.88840599 1.149501s-2.74439509-.86628-2.37882134-3.665594z" fill="var(--gg-icon)" fill-rule="evenodd"></path></svg></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/issues/58";window.___webpackCompilationHash="24ed58306e97f1c1f657";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-97dd130bca8800dece7d.js"],"app":["/app-7383f855f15f63329e5f.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-2d05d9e504a620062115.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-408674d1ce0d96365c3f.js"],"component---src-templates-archives-tsx":["/component---src-templates-archives-tsx-06d205e572129bb8618c.js"],"component---src-templates-issues-tsx":["/component---src-templates-issues-tsx-d807dcc2af9625aeadb6.js"],"component---src-templates-labels-category-tsx":["/component---src-templates-labels-category-tsx-5456164ce90934624119.js"],"component---src-templates-labels-tsx":["/component---src-templates-labels-tsx-ee7b95bd8aa06617f372.js"],"component---src-templates-nav-category-tsx":["/component---src-templates-nav-category-tsx-91c7d8cb3880e3e0fda2.js"],"component---src-templates-nav-labels-tsx":["/component---src-templates-nav-labels-tsx-ae07fd835c5a914973d3.js"]};/*]]>*/</script><script src="/polyfill-97dd130bca8800dece7d.js" nomodule=""></script><script src="/component---src-templates-issues-tsx-d807dcc2af9625aeadb6.js" async=""></script><script src="/fc369a2ef6459b03f38591687cef4a587495c716-f468df31cbdaf6ffa970.js" async=""></script><script src="/app-7383f855f15f63329e5f.js" async=""></script><script src="/framework-86c8a5417e68dc3cefff.js" async=""></script><script src="/webpack-runtime-4fee7405b8a071e8c34e.js" async=""></script></body></html>